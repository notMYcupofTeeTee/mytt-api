openapi: 3.0.0
info:
  title: myTischtennis API
  description: |
    # Inoffizielle API-Dokumentation

    > ‚ö†Ô∏è **Hinweis:** Dies ist eine **inoffizielle** Dokumentation der API-Endpunkte von 
    > [myTischtennis.de](https://www.mytischtennis.de). Sie wurde durch Analyse 
    > der √∂ffentlich im Browser (Network Tab) sichtbaren Requests erstellt.
    
    > üìÇ **Repository:** [github.com/notMYcupofTeeTee/mytt-api](https://github.com/notMYcupofTeeTee/mytt-api)


    ## Warum diese Dokumentation?

    mytischtennis.de stellt **keine offizielle API-Dokumentation** bereit, 
    obwohl alle hier dokumentierten Endpunkte √∂ffentlich zug√§nglich sind. Diese Intransparenz:

    - **Verhindert legitime Nutzung** durch Vereine (z.B. f√ºr eigene Vereins-Apps, Widgets)
    - **Sch√ºtzt niemanden** ‚Äì alle mit Browser-Entwicklertools k√∂nnen diese Endpunkte sehen
    - **Erschwert Innovation** in der Tischtennis-Community

    Diese Dokumentation soll zeigen, was technisch bereits √∂ffentlich ist, und eine Diskussion 
    √ºber Open Data im deutschen Tischtennissport ansto√üen.

    ## Disclaimer

    - Diese Dokumentation steht in **keiner Verbindung** zum DTTB oder myTischtennis.de
    - Die Nutzung erfolgt auf **eigene Verantwortung**
    - Bitte respektiere die Nutzungsbedingungen von myTischtennis.de

    ---

    ## Technische Details

    ### Authentifizierung
    Einige Endpunkte erfordern eine Cookie-basierte Authentifizierung (`sb-10-auth-token`).
    √ñffentliche Endpunkte sind mit `security: []` gekennzeichnet.
    
    ### Rate Limiting
    Die API verwendet Rate Limiting (90 Requests pro Stunde). 
    Bei √úberschreitung wird HTTP 429 zur√ºckgegeben.
  version: 1.0.0
  contact:
    name: GitHub Repository
    url: https://github.com/notMYcupofTeeTee/mytt-api
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: https://www.mytischtennis.de
    description: mytischtennis.de

# Redocly Tag-Gruppierung f√ºr bessere Navigation
x-tagGroups:
  - name: Suche & Spieler*innen
    tags:
      - Suche
      - Spieler*innen & TTR
  - name: Strukturen
    tags:
      - Mannschaften
      - Vereine
      - Ligen & Gruppen
  - name: Live-Daten
    tags:
      - Begegnungen

# Globale Sicherheitsdefinition
security:
  - cookieAuth: []

tags:
  - name: Suche
    description: |
      Globale Suche nach Spieler*innen und Vereinen.
      **√ñffentlich zug√§nglich** (Rate-Limited auf 90 Requests/Stunde).
  - name: Spieler*innen & TTR
    description: |
      TTR-Werte, Statistiken, Head-to-Head und Ranglisten.
      Enth√§lt sowohl √∂ffentliche als auch authentifizierte Endpunkte.
  - name: Mannschaften
    description: |
      Mannschafts-bezogene Daten: Aufstellungen, Bilanzen, Spielpl√§ne, Infos.
  - name: Vereine
    description: |
      Vereins-bezogene Daten: Teams, Bilanzen, Spielpl√§ne, Stammdaten.
  - name: Ligen & Gruppen
    description: |
      Liga-Strukturen: Tabellen, Bilanzen, Ranglisten, Kontakte, Meldungen.
      Enth√§lt auch die Liga-Hierarchie zum Navigieren durch Wettbewerbe.
  - name: Begegnungen
    description: |
      Live-Daten zu laufenden Begegnungen.
      √ñffentlich zug√§nglich.

paths:
  # ================================================================
  # STATISTICS & RANKING
  # ================================================================
  /api/andro-ranking/regions:
    get:
      tags:
        - Spieler*innen & TTR
      operationId: getAndroRankingRegions
      summary: Andro Ranking Regionen abrufen
      description: |
        L√§dt die verf√ºgbaren Regionen f√ºr die Andro-Ranglisten-Filter.
        
        **Hierarchie:** Verband ‚Üí Bezirk ‚Üí Kreis (nicht alle Bezirke haben Kreise)
        
        **Verwendung:**
        1. Ohne Parameter: Alle Landesverb√§nde abrufen
        2. Mit `as=<verband>&di=all`: Bezirke f√ºr einen Verband abrufen
        3. Mit `as=<verband>&di=<bezirk>`: Kreise f√ºr einen Bezirk abrufen (falls vorhanden)
      security: []
      parameters:
        - name: as
          in: query
          schema:
            type: string
            enum:
              - DE.SW.R5.01   # Baden
              - DE.SU.R1.02   # Bayern
              - DE.NO.R6.03   # Berlin
              - DE.NO.R6.04   # Brandenburg
              - DE.NO.R6.05   # Bremen
              - DE.NO.R6.06   # Hamburg
              - DE.WE.R4.07   # Hessen
              - DE.NO.R6.08   # Mecklenburg-Vorpommern
              - DE.NO.R2.09   # Niedersachsen
              - DE.WE.R3.19   # Nordrhein-Westfalen
              - DE.SW.R7.10   # Pfalz
              - DE.SW.R7.12   # Rheinland-Rheinhessen
              - DE.SW.R7.13   # Saarland
              - DE.SU.R8.14   # Sachsen
              - DE.SU.R8.15   # Sachsen-Anhalt
              - DE.NO.R6.16   # Schleswig-Holstein
              - DE.SW.R5.20   # TTBW
              - DE.SU.R8.18   # Th√ºringen
            example: "DE.WE.R3.19"
          description: |
            Landesverband-Code (optional). Wenn gesetzt, werden Bezirke f√ºr diesen Verband geladen.
            
            Verb√§nde:
            * `DE.SW.R5.01` - Baden
            * `DE.SU.R1.02` - Bayern
            * `DE.NO.R6.03` - Berlin
            * `DE.NO.R6.04` - Brandenburg
            * `DE.NO.R6.05` - Bremen
            * `DE.NO.R6.06` - Hamburg
            * `DE.WE.R4.07` - Hessen
            * `DE.NO.R6.08` - Mecklenburg-Vorpommern
            * `DE.NO.R2.09` - Niedersachsen
            * `DE.WE.R3.19` - Nordrhein-Westfalen (WTTV)
            * `DE.SW.R7.10` - Pfalz
            * `DE.SW.R7.12` - Rheinland-Rheinhessen
            * `DE.SW.R7.13` - Saarland
            * `DE.SU.R8.14` - Sachsen
            * `DE.SU.R8.15` - Sachsen-Anhalt
            * `DE.NO.R6.16` - Schleswig-Holstein
            * `DE.SW.R5.20` - TTBW
            * `DE.SU.R8.18` - Th√ºringen
        - name: di
          in: query
          schema:
            type: string
            default: "all"
            example: "all"
          description: "Bezirk-Code (aus Response) oder `all` f√ºr alle Bezirke des Verbands."
      responses:
        '200':
          description: Liste der Landesverb√§nde und Bezirke
          content:
            application/json:
              schema:
                type: object
                properties:
                  associations:
                    type: array
                    description: Alle deutschen Landesverb√§nde
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          example: "Nordrhein-Westfalen"
                        pattern:
                          type: string
                          description: Verband-Code f√ºr `as` Parameter
                          example: "DE.WE.R3.19"
                  districts:
                    type: array
                    description: Bezirke des gew√§hlten Verbands (leer wenn kein `as` gesetzt)
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          example: "Rhein-Wupper"
                        pattern:
                          type: string
                          description: Bezirk-Code f√ºr `di` Parameter
                          example: "DE.WE.R3.19.13"
                  areas:
                    type: array
                    description: |
                      Kreise innerhalb eines Bezirks (tiefste Ebene).
                      Nur gef√ºllt, wenn `di` auf einen spezifischen Bezirk gesetzt ist UND dieser Kreise hat.
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          example: "Kreis Ludwigslust-Parchim"
                        pattern:
                          type: string
                          description: Kreis-Code f√ºr `area` Parameter
                          example: "DE.NO.R6.08.01.01"
              example:
                associations:
                  - name: "Baden"
                    pattern: "DE.SW.R5.01"
                  - name: "Bayern"
                    pattern: "DE.SU.R1.02"
                  - name: "Mecklenburg-Vorpommern"
                    pattern: "DE.NO.R6.08"
                  - name: "Nordrhein-Westfalen"
                    pattern: "DE.WE.R3.19"
                districts:
                  - name: "Bezirk Nordost"
                    pattern: "DE.NO.R6.08.02"
                  - name: "Bezirk S√ºdost"
                    pattern: "DE.NO.R6.08.03"
                  - name: "Bezirk West"
                    pattern: "DE.NO.R6.08.01"
                areas:
                  - name: "Kreis Ludwigslust-Parchim"
                    pattern: "DE.NO.R6.08.01.01"
                  - name: "Kreis Nordwestmecklenburg"
                    pattern: "DE.NO.R6.08.01.02"
                  - name: "Kreis Schwerin"
                    pattern: "DE.NO.R6.08.01.03"

  /api/statistics/{player_id}/matches/{date_range}:
    get:
      tags:
        - Spieler*innen & TTR
      operationId: getPlayerMatchStatistics
      summary: Match-Statistiken abrufen
      description: |
        L√§dt detaillierte Match-Statistiken f√ºr einen bestimmten Zeitraum.
        
        Enth√§lt Gewinn/Verlust-Statistiken, Heim/Ausw√§rts-Aufschl√ºsselung und Match-Details.
        
        **Authentifizierung erforderlich.** Bei fehlender Auth wird HTTP 200 mit Fehler im Body zur√ºckgegeben.
      security:
        - cookieAuth: []
      parameters:
        - $ref: '#/components/parameters/playerId'
        - $ref: '#/components/parameters/dateRange'
      responses:
        '200':
          description: |
            Detaillierte Match-Statistiken.
            
            **Achtung:** Bei fehlender Authentifizierung gibt der Server ebenfalls HTTP 200 zur√ºck,
            aber mit `{"error": "Not authorized"}` im Body statt der eigentlichen Daten.
          content:
            application/json:
              schema:
                type: object
              examples:
                success:
                  summary: Erfolgreiche Abfrage (mit Auth)
                  value:
                    data:
                      matches:
                        total: 7
                        wins: 6
                        losses: 1
                        home: 3
                        home_wins: []
                        home_losses: []
                        guest: 4
                        guest_wins: []
                        guest_losses: []
                      is_premium: true
                unauthorized:
                  summary: Fehlende Authentifizierung (trotz HTTP 200!)
                  value:
                    error: "Not authorized"

  /api/head-to-head:
    post:
      tags:
        - Spieler*innen & TTR
      operationId: getHeadToHead
      summary: Head-to-Head Vergleich
      description: |
        Vergleicht die direkten Begegnungen zwischen der eingeloggten Person und einer anderen Person.
        
        **Authentifizierung erforderlich.** Der Server gibt HTTP 400 mit `"Not authorized"` bei fehlender Auth zur√ºck.
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - other_user
              properties:
                other_user:
                  type: string
                  description: Spieler-ID des Gegners (internal_id ohne "NU"-Pr√§fix)
                  example: "1462405"
      responses:
        '200':
          description: Head-to-Head Statistiken
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                    description: Liste der direkten Begegnungen
              example:
                data: []
        '400':
          description: Nicht authentifiziert (Server gibt 400 statt 401)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
              example:
                error: "Not authorized"

  /api/statistics/{player_id}/ttr/{date_range}:
    get:
      tags:
        - Spieler*innen & TTR
      operationId: getPlayerTtrHistory
      summary: TTR-Historie abrufen
      description: |
        L√§dt eine kompakte TTR-√úbersicht (Start/End/Delta) f√ºr einen definierten Zeitraum.
        
        **Unterschied zu `/api/ttr/history/{nuid}`:** Dieser Endpunkt liefert nur Aggregatwerte,
        nicht die detaillierten Einzelevents.
        
        **Authentifizierung erforderlich.** Bei fehlender Auth wird HTTP 200 mit Fehler im Body zur√ºckgegeben.
      security:
        - cookieAuth: []
      parameters:
        - $ref: '#/components/parameters/playerId'
        - $ref: '#/components/parameters/dateRange'
      responses:
        '200':
          description: |
            TTR-Verlauf im gew√§hlten Zeitraum.
            
            **Achtung:** Bei fehlender Authentifizierung gibt der Server ebenfalls HTTP 200 zur√ºck,
            aber mit `{"error": "Not authorized"}` im Body.
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      start:
                        type: integer
                        description: Start-TTR-Wert
                      end:
                        type: integer
                        description: End-TTR-Wert
                      delta:
                        type: integer
                        description: √Ñnderung des TTR-Werts (end - start)
              examples:
                success:
                  summary: Erfolgreiche Abfrage (mit Auth)
                  value:
                    data:
                      start: 2641
                      end: 2618
                      delta: -23
                unauthorized:
                  summary: Fehlende Authentifizierung (trotz HTTP 200!)
                  value:
                    error: "Not authorized"
  
  /api/league-table/{association}/{id}:
    get:
      tags:
        - Ligen & Gruppen
      operationId: getLeagueTable
      summary: Ligatabelle abrufen
      description: Gibt die aktuelle Tabelle mit Platzierungen und Vereins-IDs zur√ºck.
      security: []
      parameters:
        - $ref: '#/components/parameters/association'
        - name: id
          in: path
          required: true
          schema:
            type: string
            example: "499406"
      responses:
        '200':
          description: Erfolgreiche Abfrage der Tabelle
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        club_id:
                          type: string
                          description: Die eindeutige ID des Vereins
                        team_name:
                          type: string
                          description: Name der Mannschaft
                        table_rank:
                          type: integer
                          description: Aktueller Tabellenplatz
                  error:
                    type: string
                    nullable: true
                    description: Fehlermeldung, falls vorhanden (sonst null)
              example:
                data:
                  - club_id: "1001"
                    team_name: "TTC Musterstadt I"
                    table_rank: 1
                  - club_id: "2045"
                    team_name: "SV Beispielhausen II"
                    table_rank: 2
                  - club_id: "3099"
                    team_name: "FC Testverein III"
                    table_rank: 3
                  - club_id: "4150"
                    team_name: "DJK Anonymus IV"
                    table_rank: 4
                  - club_id: "5200"
                    team_name: "SpVgg Platzhalter V"
                    table_rank: 5
                  - club_id: "6010"
                    team_name: "TSV Unbekannt VI"
                    table_rank: 6
                  - club_id: "7080"
                    team_name: "SC Lorem Ipsum VII"
                    table_rank: 7
                  - club_id: "8030"
                    team_name: "SG Zufall VIII"
                    table_rank: 8
                  - club_id: "9040"
                    team_name: "TTF Demo IX"
                    table_rank: 9
                  - club_id: "9900"
                    team_name: "TuS Ende der Liste X"
                    table_rank: 10
                error: null

  # ================================================================
  # SEARCH
  # ================================================================
  /api/search/players:
    post:
      tags:
        - Suche
      operationId: searchPlayers
      summary: Spieler*innen suchen
      description: |
        Globale Suche nach Spieler*innen (nach Name).
        
        Gibt Spieler mit ihrer NUID, Vereinszugeh√∂rigkeit und TTR-Wert zur√ºck.
        Mindestens 3 Zeichen erforderlich.
        
        **√ñffentlich zug√§nglich**, aber Rate-Limited (90 Requests/Stunde).
      security: []
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - query
              properties:
                query:
                  type: string
                  description: Suchbegriff
                  example: "Dang"
                page:
                  type: integer
                  description: Seitennummer f√ºr Pagination
                  default: 1
                pagesize:
                  type: integer
                  description: Anzahl Ergebnisse pro Seite
                  default: 4
      responses:
        '200':
          description: Gefundene Spieler*innen
          headers:
            RateLimit:
              description: Rate Limit Status
              schema:
                type: string
                example: "90-in-1hr; r=67; t=938"
            RateLimit-Policy:
              description: Rate Limit Policy
              schema:
                type: string
                example: "90-in-1hr; q=90; w=3600"
          content:
            application/json:
              schema:
                type: object
                properties:
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        lastname:
                          type: string
                        firstname:
                          type: string
                        person_id:
                          type: integer
                        internal_id:
                          type: string
                        licence_club:
                          type: string
                        dttb_player_id:
                          type: string
                          nullable: true
                        club_name:
                          type: string
                  total_count:
                    type: integer
                  pages_count:
                    type: integer
                  page:
                    type: integer
                  pagesize:
                    type: integer
              example:
                results:
                  - lastname: "Qiu"
                    firstname: "Dang"
                    person_id: 344349
                    internal_id: "NU7535"
                    licence_club: "Borussia D√ºsseldorf (13118)"
                    dttb_player_id: null
                    club_name: "Borussia D√ºsseldorf"
                total_count: 9
                pages_count: 3
                page: 1
                pagesize: 4
        '400':
          $ref: '#/components/responses/BadRequest'
        '429':
          $ref: '#/components/responses/RateLimited'

  /api/search/clubs:
    post:
      tags:
        - Suche
      operationId: searchClubs
      summary: Vereine suchen
      description: |
        Globale Vereinssuche nach Name.
        
        Gibt Vereine mit ihrer Vereinsnummer, Verband und weiteren Details zur√ºck.
        Mindestens 3 Zeichen erforderlich.
        
        **√ñffentlich zug√§nglich**, aber Rate-Limited (90 Requests/Stunde).
      security: []
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - query
              properties:
                query:
                  type: string
                  description: Suchbegriff
                  example: "Borussia"
                page:
                  type: integer
                  description: Seitennummer f√ºr Pagination
                  default: 1
                pagesize:
                  type: integer
                  description: Anzahl Ergebnisse pro Seite
                  default: 4
      responses:
        '200':
          description: Gefundene Vereine
          headers:
            RateLimit:
              description: Rate Limit Status
              schema:
                type: string
                example: "90-in-1hr; r=87; t=2917"
            RateLimit-Policy:
              description: Rate Limit Policy
              schema:
                type: string
                example: "90-in-1hr; q=90; w=3600"
          content:
            application/json:
              schema:
                type: object
                properties:
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        external_id:
                          type: string
                          format: uuid
                        clubname:
                          type: string
                        clubnr:
                          type: string
                        organization_id:
                          type: integer
                        organization_name:
                          type: string
                        organization_short:
                          type: string
                  total_count:
                    type: integer
                  pages_count:
                    type: integer
                  page:
                    type: integer
                  pagesize:
                    type: integer
              example:
                results:
                  - external_id: "d937e5f2-c8d6-4f2c-b674-b5b4f36a6952"
                    clubname: "Borussia D√ºsseldorf"
                    clubnr: "13118"
                    organization_id: 28
                    organization_name: "Westdeutscher Tischtennis-Verband e.V."
                    organization_short: "WTTV"
                total_count: 12
                pages_count: 3
                page: 1
                pagesize: 4
        '400':
          $ref: '#/components/responses/BadRequest'
        '429':
          $ref: '#/components/responses/RateLimited'


  # ================================================================
  # TTR
  # ================================================================
  /api/ttr/history/{nuid}:
    get:
      tags:
        - Spieler*innen & TTR
      operationId: getTtrHistoryByNuid
      summary: TTR Historie via NUID
      security:
        - cookieAuth: []
      parameters:
        - name: nuid
          in: path
          required: true
          schema:
            type: string
          description: Nationale User ID
          example: "NU7535"
      responses:
        '200':
          description: |
            Vollst√§ndige TTR-Historie mit allen Ereignissen.
            
            **Achtung:** Bei fehlender Authentifizierung gibt der Server HTTP 200 zur√ºck,
            aber mit einem strukturierten Fehler-Objekt im Body.
          headers:
            RateLimit:
              description: Rate Limit Status
              schema:
                type: string
                example: "90-in-1hr; r=89; t=3600"
            RateLimit-Policy:
              description: Rate Limit Policy
              schema:
                type: string
                example: "90-in-1hr; q=90; w=3600"
          content:
            application/json:
              schema:
                type: object
                properties:
                  ttr:
                    type: integer
                    description: Aktueller TTR-Wert
                  event:
                    type: array
                    items:
                      type: object
                      properties:
                        wlr:
                          type: string
                          nullable: true
                        type:
                          type: string
                          description: Event-Typ (z.B. "meeting")
                        match:
                          type: array
                          items:
                            type: object
                          description: Einzelne Matches innerhalb des Events
                        event_id:
                          type: integer
                        ttr_after:
                          type: integer
                          description: TTR nach dem Event
                        ttr_delta:
                          type: integer
                          description: TTR-√Ñnderung
                        event_name:
                          type: string
                        ttr_before:
                          type: integer
                          description: TTR vor dem Event
                        match_count:
                          type: integer
                        matches_won:
                          type: integer
                        matches_lost:
                          type: integer
                        event_date_time:
                          type: string
                          format: date-time
                        expected_result:
                          type: string
                        alteration_constant:
                          type: integer
                    description: Chronologische Liste aller TTR-Events
                  vq_ttr:
                    type: integer
                    description: Vorquartal-TTR
                  max_ttr:
                    type: integer
                    description: H√∂chster jemals erreichter TTR
                  ttr_date:
                    type: string
                    format: date
                  club_name:
                    type: string
                  from_date:
                    type: string
                    format: date-time
                  person_id:
                    type: string
                  until_date:
                    type: string
                    format: date-time
                  person_name:
                    type: string
                  max_ttr_date:
                    type: string
                    format: date
                  ttr_last_fixed:
                    type: string
                  vq_ttr_german_rank:
                    type: integer
                  ttr_last_fixed_date:
                    type: string
                    format: date
                  vq_ttr_german_sex_rank:
                    type: integer
                  ttr_last_fixed_german_rank:
                    type: integer
                  ttr_last_fixed_german_sex_rank:
                    type: integer
              examples:
                success:
                  summary: Erfolgreiche Abfrage (mit Auth)
                  value:
                    ttr: 2618
                    event:
                      - wlr: null
                        type: "meeting"
                        match:
                          - type: "meeting"
                            own_set1: 11
                            own_set2: 11
                            own_set3: 9
                            own_set4: 11
                            own_sets: 3
                            other_ttr: 2547
                            scheduled: "2025-11-12 18:30:00"
                            other_sets: 1
                            own_person_name: "Qiu, Dang"
                            other_person_name: "Karlsson, Kristian"
                        event_id: 422517555
                        ttr_after: 2624
                        ttr_delta: 4
                        event_name: "BL1-Erwachsene | Borussia D√ºsseldorf : BV Borussia Dortmund"
                        ttr_before: 2620
                        match_count: 1
                        matches_won: 1
                        matches_lost: 0
                        event_date_time: "2025-11-12T18:30:00+00:00"
                        expected_result: "0,7541"
                        alteration_constant: 16
                    vq_ttr: 2623
                    max_ttr: 2661
                    ttr_date: "2025-12-01"
                    club_name: "Borussia D√ºsseldorf"
                    person_id: "NU7535"
                    person_name: "Qiu, Dang"
                    max_ttr_date: "2024-09-09"
                unauthorized:
                  summary: Fehlende Authentifizierung (trotz HTTP 200!)
                  value:
                    error:
                      code: "PT403"
                      details: "Not logged in"
                      hint: "Login or register"
                      message: "Not authorized"

  /api/ttr/player/{nuid}:
    get:
      tags:
        - Spieler*innen & TTR
      operationId: getCurrentTtr
      summary: Aktuellen TTR-Wert abrufen
      description: |
        **Hinweis:** Dieser Endpunkt ben√∂tigt Authentifizierung.
        Ohne Auth wird ein `PT403` Fehler zur√ºckgegeben.
      security:
        - cookieAuth: []
      parameters:
        - name: nuid
          in: path
          required: true
          schema:
            type: string
          description: Nationale User ID
          example: "NU7535"
      responses:
        '200':
          description: |
            Aktueller TTR-Wert.
            
            **Achtung:** Bei fehlender Authentifizierung gibt der Server HTTP 200 zur√ºck,
            aber mit `ttr: null` und einem strukturierten Fehler-Objekt.
          content:
            application/json:
              schema:
                type: object
                properties:
                  ttr:
                    type: integer
                    nullable: true
                    description: Aktueller TTR-Wert des Spielers (null bei Auth-Fehler)
                  error:
                    type: object
                    nullable: true
                    description: Fehler-Objekt bei fehlender Authentifizierung (null bei erfolgreicher Abfrage)
                    properties:
                      code:
                        type: string
                      details:
                        type: string
                      hint:
                        type: string
                      message:
                        type: string
              examples:
                success:
                  summary: Erfolgreiche Abfrage (mit Auth)
                  value:
                    ttr: 2618
                    error: null
                unauthorized:
                  summary: Fehlende Authentifizierung (trotz HTTP 200!)
                  value:
                    ttr: null
                    error:
                      code: "PT403"
                      details: "Not logged in"
                      hint: "Login or register"
                      message: "Not authorized"

  /api/meeting/{meeting_id}/live:
    get:
      tags:
        - Begegnungen
      operationId: getMeetingLiveStatus
      summary: Live-Status einer Begegnung abrufen
      description: |
        L√§dt den aktuellen Live-Status einer laufenden oder abgeschlossenen Begegnung.
        
        Enth√§lt Spielst√§nde, Aufstellungen und Einzelergebnisse.
        
        **√ñffentlich zug√§nglich.**
      security: []
      parameters:
        - name: meeting_id
          in: path
          required: true
          schema:
            type: string
          description: Meeting/Begegnungs-ID
          example: "15348526"
      responses:
        '200':
          description: Live-Status und Daten der Begegnung
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      live:
                        type: boolean
                        description: Ob die Begegnung aktuell live l√§uft
                      is_completed:
                        type: boolean
                        description: Ob die Begegnung abgeschlossen ist
                      has_nu_live_push_data:
                        type: boolean
                        description: Ob Live-Push-Daten verf√ºgbar sind
                      scheduled:
                        type: string
                        format: date-time
                        description: Geplanter Start
                      start_date:
                        type: string
                        format: date-time
                      end_date:
                        type: string
                        format: date-time
                      team_home:
                        type: string
                        description: Name Heim-Mannschaft
                      team_guest:
                        type: string
                        description: Name Gast-Mannschaft
                      team_home_id:
                        type: string
                      team_guest_id:
                        type: string
                      matches_home:
                        type: integer
                        description: Gewonnene Matches Heim
                      matches_guest:
                        type: integer
                        description: Gewonnene Matches Gast
                      sets_home:
                        type: integer
                        description: Gewonnene S√§tze Heim
                      sets_guest:
                        type: integer
                        description: Gewonnene S√§tze Gast
                      games_home:
                        type: integer
                        description: Gewonnene Spiele Heim
                      games_guest:
                        type: integer
                        description: Gewonnene Spiele Gast
                      match:
                        type: array
                        items:
                          type: object
                          properties:
                            match_name:
                              type: string
                            game_type:
                              type: string
                              enum: [single, double]
                            sets_home:
                              type: integer
                            sets_guest:
                              type: integer
                            set1_home:
                              type: integer
                            set1_guest:
                              type: integer
                            mm_player11:
                              type: object
                              description: Heimspieler 1
                            mm_player12:
                              type: object
                              nullable: true
                              description: Heimspieler 2 (nur bei Doppel)
                            mm_player21:
                              type: object
                              description: Gastspieler 1
                            mm_player22:
                              type: object
                              nullable: true
                              description: Gastspieler 2 (nur bei Doppel)
                        description: Einzelne Matches mit Spielst√§nden
                      location:
                        type: object
                        description: Spielort-Details
                      group_name:
                        type: string
                      league_name:
                        type: string
                      season_nickname:
                        type: string
                  error:
                    type: string
                    nullable: true
                    description: Fehlermeldung, falls vorhanden
              example:
                data:
                  live: false
                  is_completed: true
                  has_nu_live_push_data: false
                  scheduled: "2025-09-16T17:00:00.000+00:00"
                  team_home: "ASC Gr√ºnwettersbach"
                  team_guest: "Borussia D√ºsseldorf"
                  matches_home: 3
                  matches_guest: 1
                  sets_home: 9
                  sets_guest: 5
                  match:
                    - match_name: "1-2"
                      game_type: "single"
                      sets_home: 3
                      sets_guest: 1
                      set1_home: 1
                      set1_guest: 11
                      mm_player11:
                        firstname: "Hiroto"
                        lastname: "Shinozuka"
                        person_id: "NU1911451"
                      mm_player21:
                        firstname: "Yongyin"
                        lastname: "Li"
                        person_id: "NU2250510"
                error: null

  /api/ttr/teams:
    get:
      tags:
        - Vereine
      operationId: getClubTeams
      summary: Teams eines Vereins abrufen
      description: |
        L√§dt alle Mannschaften eines Vereins f√ºr eine bestimmte Saison.
        
        Gibt Team-IDs zur√ºck, die f√ºr weitere API-Aufrufe ben√∂tigt werden.
        
        **√ñffentlich zug√§nglich.**
      security: []
      parameters:
        - name: clubNumber
          in: query
          required: true
          schema:
            type: string
            example: "13118"
          description: Die Vereinsnummer (z.B. aus der Suche)
        - name: organization
          in: query
          required: true
          schema:
            type: string
            example: "WTTV"
          description: Der Landesverband (z.B. WTTV, TTVN, etc.)
      responses:
        '200':
          description: Liste der Teams
          headers:
            RateLimit:
              description: Rate Limit Status
              schema:
                type: string
                example: "90-in-1hr; r=78; t=1168"
            RateLimit-Policy:
              description: Rate Limit Policy
              schema:
                type: string
                example: "90-in-1hr; q=90; w=3600"
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        season:
                          type: string
                          description: Saison (z.B. "25/26" oder "P 25/26" f√ºr Pokal)
                        team_id:
                          type: string
                          description: Eindeutige Team-ID
                        group_id:
                          type: string
                          description: Gruppen-ID
                        team_name:
                          type: string
                          description: Name des Teams
                        points_won:
                          type: string
                          description: Gewonnene Punkte
                        table_rank:
                          type: string
                          description: Tabellenplatz
                        league_name:
                          type: string
                          description: Name der Liga
                        points_lost:
                          type: string
                          description: Verlorene Punkte
                        team_organisation_short:
                          type: string
                          description: K√ºrzel des zust√§ndigen Verbands
                    description: Liste der Teams des Vereins
                  error:
                    type: string
                    nullable: true
                    description: Fehlermeldung, falls vorhanden
              example:
                data:
                  - season: "25/26"
                    team_id: "2953148"
                    group_id: "493079"
                    team_name: "Erwachsene"
                    points_won: "14"
                    table_rank: "1"
                    league_name: "Tischtennis Bundesliga"
                    points_lost: "4"
                    team_organisation_short: "DTTB"
                error: null

  /api/ttr/team/schedule:
    get:
      tags:
        - Mannschaften
      operationId: getTeamSchedule
      summary: Mannschaftsspielplan abrufen
      description: |
        L√§dt den Spielplan einer Mannschaft.
        
        Liefert alle Begegnungen mit Gegner, Datum und Ergebnis (falls gespielt).
        
        **√ñffentlich zug√§nglich.**
      security: []
      parameters:
        - name: teamId
          in: query
          required: true
          schema:
            type: string
          description: Eindeutige Team-ID
          example: "2953148"
        - name: season
          in: query
          required: true
          schema:
            type: string
          description: Saison-K√ºrzel oder Jahr (z.B. "25--26")
          example: "25--26"
      responses:
        '200':
          description: Spielplan Daten
          headers:
            RateLimit:
              description: Rate Limit Status
              schema:
                type: string
                example: "90-in-1hr; r=82; t=589"
            RateLimit-Policy:
              description: Rate Limit Policy
              schema:
                type: string
                example: "90-in-1hr; q=90; w=3600"
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        opponent_team_id:
                          type: integer
                          description: ID des gegnerischen Teams
                        opponent_team_name:
                          type: string
                          description: Name des gegnerischen Teams
                        date:
                          type: string
                          format: date-time
                          description: Spieltermin (ISO 8601)
                    description: Liste der Spieltermine und Begegnungen
                  error:
                    type: string
                    nullable: true
                    description: Fehlermeldung, falls vorhanden
              example:
                data:
                  - opponent_team_id: 2953190
                    opponent_team_name: "TTC Schwalbe Bergneustadt"
                    date: "2025-11-16T11:00:00.000+00:00"
                error: null

  /api/ttr/team/players:
    get:
      tags:
        - Mannschaften
      operationId: getTeamPlayers
      summary: Aufstellung einer Mannschaft abrufen
      description: |
        L√§dt die Aufstellung einer Mannschaft mit Rangpositionen.
        
        Gibt die Namen, NU-IDs und Rangfolge der gemeldeten Personen zur√ºck.
        
        **√ñffentlich zug√§nglich.**
      security: []
      parameters:
        - name: teamId
          in: query
          required: true
          schema:
            type: string
          description: Eindeutige Team-ID
          example: "2953148"
      responses:
        '200':
          description: Aufstellungsliste
          headers:
            RateLimit:
              description: Rate Limit Status
              schema:
                type: string
                example: "90-in-1hr; r=82; t=589"
            RateLimit-Policy:
              description: Rate Limit Policy
              schema:
                type: string
                example: "90-in-1hr; q=90; w=3600"
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        firstname:
                          type: string
                          description: Vorname des Spielers
                        lastname:
                          type: string
                          description: Nachname des Spielers
                        internal_id:
                          type: string
                          description: Interne Spieler-ID
                        rank:
                          type: integer
                          description: Position/Rang in der Mannschaft
                    description: Aufstellungsliste der Mannschaft
                  error:
                    type: string
                    nullable: true
                    description: Fehlermeldung, falls vorhanden
              example:
                data:
                  - firstname: "Dang"
                    lastname: "Qiu"
                    internal_id: "NU7535"
                    rank: 1
                  - firstname: "Yongyin"
                    lastname: "Li"
                    internal_id: "NU2250510"
                    rank: 2
                error: null

  # ================================================================
  # FRONTEND-DATA
  # ================================================================
  /click-tt/{association}/{season}/ligen/{league_slug}/gruppe/{groupId}/tabelle/{filter}:
    get:
      tags:
        - Ligen & Gruppen
      operationId: getFrontendLeagueTable
      summary: Liga-Tabelle abrufen
      description: |
        L√§dt die detaillierte Tabelle direkt aus dem Frontend-Loader.
        **Wichtig:** Dies ist der einzige Weg, um explizit die **Vorrunde (vr)** oder **R√ºckrunde (rr)** abzurufen.
        Die "saubere" API `/api/league-table` ignoriert diesen Filter oft.
      security: []
      parameters:
        - $ref: '#/components/parameters/association'
        
        - name: season
          in: path
          required: true
          schema:
            type: string
            example: "25--26"
          description: "Saison (z.B. 25--26)"

        - name: league_slug
          in: path
          required: true
          schema:
            type: string
            example: "Tischtennis_Bundesliga"
          description: "Name der Liga (URL-Slug, technischer Wert f√ºr API irrelevant)"

        - name: groupId
          in: path
          required: true
          schema:
            type: string
            example: "493079"
          description: "Die Gruppen-ID"

        - name: filter
          in: path
          required: true
          schema:
            type: string
            enum: 
              - gesamt
              - vr
              - rr
            default: gesamt
          description: "Zeitraum-Filter (gesamt = Gesamttabelle, vr = Vorrunde/Hinrunde, rr = R√ºckrunde)"

        - name: _data
          in: query
          required: true
          schema:
            type: string
            default: "routes/click-tt+/$association+/$season+/$type+/$groupname.gruppe.$urlid+/tabelle.$filter"
            example: "routes/click-tt+/$association+/$season+/$type+/$groupname.gruppe.$urlid+/tabelle.$filter"
          description: "Muss exakt dieser String sein (URL-encoded beim Aufruf). Interne Remix Route-ID."

      responses:
        '200':
          description: Page Data mit vollst√§ndigen Tabellen- und Spieldaten
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      set_count:
                        type: integer
                        description: Gesamtanzahl der S√§tze
                      game_count:
                        type: integer
                        description: Gesamtanzahl der Spiele
                      head_infos:
                        $ref: '#/components/schemas/FrontendHeadInfos'
                      no_meetings:
                        type: boolean
                      league_table:
                        type: array
                        items:
                          type: object
                          properties:
                            club_id:
                              type: string
                            team_id:
                              type: string
                            sets_won:
                              type: integer
                            tendency:
                              type: string
                            games_won:
                              type: integer
                            sets_lost:
                              type: integer
                            team_name:
                              type: string
                            games_lost:
                              type: integer
                            points_won:
                              type: integer
                            table_rank:
                              type: integer
                            is_excluded:
                              type: boolean
                            matches_won:
                              type: integer
                            points_lost:
                              type: integer
                            matches_lost:
                              type: integer
                            meetings_tie:
                              type: integer
                            meetings_won:
                              type: integer
                            meetings_lost:
                              type: integer
                            sets_relation:
                              type: string
                            games_relation:
                              type: string
                            meetings_count:
                              type: integer
                            rise_fall_state:
                              type: string
                            is_excluded_date:
                              type: string
                              nullable: true
                            is_excluded_text:
                              type: string
                              nullable: true
                            matches_relation:
                              type: string
                      games_per_set:
                        type: number
                        format: float
                      league_ttr_avg:
                        type: integer
                        nullable: true
                      meetings_excerpt:
                        type: object
                        properties:
                          remarks:
                            type: string
                            nullable: true
                          meetings:
                            type: array
                            items:
                              type: object
                              properties:
                                date:
                                  type: string
                                  format: date-time
                                live:
                                  type: boolean
                                state:
                                  type: string
                                  enum: [scheduled, done, cancelled]
                                pdf_url:
                                  type: string
                                end_date:
                                  type: string
                                  format: date-time
                                location:
                                  type: object
                                  properties:
                                    zip:
                                      type: string
                                      nullable: true
                                    city:
                                      type: string
                                      nullable: true
                                    label:
                                      type: string
                                      nullable: true
                                    street:
                                      type: string
                                      nullable: true
                                    country:
                                      type: string
                                      nullable: true
                                league_id:
                                  type: string
                                team_away:
                                  type: string
                                team_home:
                                  type: string
                                meeting_id:
                                  type: string
                                round_name:
                                  type: string
                                  nullable: true
                                round_type:
                                  type: string
                                hall_number:
                                  type: string
                                is_letter_h:
                                  type: boolean
                                is_letter_t:
                                  type: boolean
                                is_letter_u:
                                  type: boolean
                                is_letter_v:
                                  type: boolean
                                is_letter_w:
                                  type: boolean
                                is_letter_z:
                                  type: boolean
                                league_name:
                                  type: string
                                matches_won:
                                  type: string
                                is_confirmed:
                                  type: boolean
                                is_letter_na:
                                  type: boolean
                                is_letter_w2:
                                  type: boolean
                                matches_lost:
                                  type: string
                                team_away_id:
                                  type: string
                                team_home_id:
                                  type: string
                                letter_h_info:
                                  type: string
                                  nullable: true
                                letter_w_info:
                                  type: string
                                  nullable: true
                                letter_z_info:
                                  type: string
                                  nullable: true
                                original_date:
                                  type: string
                                  format: date-time
                                  nullable: true
                                letter_na_info:
                                  type: string
                                  nullable: true
                                meeting_number:
                                  type: string
                                  nullable: true
                                league_short_name:
                                  type: string
                                team_away_club_id:
                                  type: string
                                team_home_club_id:
                                  type: string
                                is_meeting_complete:
                                  type: boolean
                                has_nu_live_push_data:
                                  type: boolean
                                  nullable: true
                                league_org_short_name:
                                  type: string
                                nu_score_live_enabled:
                                  type: boolean
                                is_provisionally_recorded:
                                  type: boolean
                          round_type:
                            type: string
                          pdf_version_url:
                            type: string
                          pdf_materials_url:
                            type: string
                  season_filter:
                    type: string
                  filter:
                    type: string
                  association:
                    $ref: '#/components/schemas/Association'
                  error:
                    type: string
                    nullable: true
                  season:
                    type: string
                  groupname:
                    type: string
                  urlid:
                    type: string
              example:
                data:
                  set_count: 828
                  game_count: 15462
                  head_infos:
                    season: "25/26"
                    play_mode: "TTBL Spielsystem inkl. Doppel"
                    league_name: "Tischtennis Bundesliga"
                    championship: "DTTB 25/26"
                    gender_age_group: "Erwachsene"
                    organization_short: "DTTB"
                  no_meetings: false
                  league_table:
                    - club_id: "13118"
                      team_id: "2953148"
                      sets_won: 80
                      tendency: "steady"
                      games_won: 1328
                      sets_lost: 55
                      team_name: "Borussia D√ºsseldorf"
                      games_lost: 1162
                      points_won: 14
                      table_rank: 1
                      is_excluded: false
                      matches_won: 22
                      points_lost: 4
                      matches_lost: 12
                      meetings_tie: 0
                      meetings_won: 7
                      meetings_lost: 2
                      sets_relation: "+25"
                      games_relation: "+166"
                      meetings_count: 9
                      rise_fall_state: "none"
                      is_excluded_date: null
                      is_excluded_text: null
                      matches_relation: "+10"
                    - club_id: "42"
                      team_id: "2953155"
                      sets_won: 78
                      tendency: "steady"
                      games_won: 1315
                      sets_lost: 59
                      team_name: "SV Werder Bremen"
                      games_lost: 1240
                      points_won: 14
                      table_rank: 2
                      is_excluded: false
                      matches_won: 22
                      points_lost: 4
                      matches_lost: 12
                      meetings_tie: 0
                      meetings_won: 7
                      meetings_lost: 2
                      sets_relation: "+19"
                      games_relation: "+75"
                      meetings_count: 9
                      rise_fall_state: "none"
                      is_excluded_date: null
                      is_excluded_text: null
                      matches_relation: "+10"
                  games_per_set: 18.7
                  league_ttr_avg: null
                  meetings_excerpt:
                    remarks: null
                    meetings:
                      - date: "2025-11-16T11:00:00.000+00:00"
                        live: false
                        state: "done"
                        pdf_url: "https://dttb.click-tt.de/cgi-bin/WebObjects/nuLigaDokumentTTDE.woa/wa/nuDokument?dokument=MeetingReportTTFOP&meeting=15348642&historicalDataToken=ywIZitm4LWVkT3IxDWp7dA%3D%3D"
                        end_date: "2025-11-16T14:08:00.000+00:00"
                        location:
                          zip: "40629"
                          city: "D√ºsseldorf"
                          label: "ARAG CenterCourt"
                          street: "Borussia-D√ºsseldorf-Stra√üe 1 Parken auf P+R Staufenplatz"
                          country: "Deutschland"
                        league_id: "493079"
                        team_away: "TTC Schwalbe Bergneustadt"
                        team_home: "Borussia D√ºsseldorf"
                        meeting_id: "15348642"
                        round_name: null
                        round_type: "0"
                        hall_number: "1"
                        is_letter_h: false
                        is_letter_t: false
                        is_letter_u: false
                        is_letter_v: false
                        is_letter_w: false
                        is_letter_z: false
                        league_name: "Tischtennis Bundesliga"
                        matches_won: "3"
                        is_confirmed: false
                        is_letter_na: false
                        is_letter_w2: false
                        matches_lost: "1"
                        team_away_id: "2953190"
                        team_home_id: "2953148"
                        letter_h_info: null
                        letter_w_info: null
                        letter_z_info: null
                        original_date: null
                        letter_na_info: null
                        meeting_number: null
                        league_short_name: "BL1 E"
                        team_away_club_id: "21608"
                        team_home_club_id: "13118"
                        is_meeting_complete: true
                        has_nu_live_push_data: null
                        league_org_short_name: "DTTB"
                        nu_score_live_enabled: false
                        is_provisionally_recorded: false
                    round_type: "mixed"
                    pdf_version_url: "https://dttb.click-tt.de/cgi-bin/WebObjects/nuLigaDokumentTTDE.woa/wa/nuDokument?dokument=ScheduleReportFOP&group=493079"
                    pdf_materials_url: "https://dttb.click-tt.de/cgi-bin/WebObjects/nuLigaDokumentTTDE.woa/wa/nuDokument?dokument=TeamMaterialsFOP&group=493079"
                season_filter: "finalRound"
                filter: "gesamt"
                association: "DTTB"
                error: null
                season: "25--26"
                groupname: "Tischtennis_Bundesliga"
                urlid: "493079"

  /click-tt/{association}/{season}/ligen/{league_slug}/gruppe/{groupId}/spielplan/{filter}:
    get:
      tags:
        - Ligen & Gruppen
      operationId: getFrontendSchedule
      summary: Gruppen-Spielplan abrufen
      description: |
        L√§dt den Spielplan direkt aus dem Frontend-Loader.
        Erm√∂glicht die Filterung nach **Vorrunde (vr)** und **R√ºckrunde (rr)**, was √ºber die Standard-API oft nicht m√∂glich ist.
      security: []
      parameters:
        - $ref: '#/components/parameters/association'
        
        - name: season
          in: path
          required: true
          schema:
            type: string
            example: "25--26"
          description: "Saison (z.B. 25--26)"

        - name: league_slug
          in: path
          required: true
          schema:
            type: string
            example: "Tischtennis_Bundesliga"
            default: "x"
          description: "Name der Liga (URL-Slug). Technisch meist irrelevant ('x' funktioniert oft)."

        - name: groupId
          in: path
          required: true
          schema:
            type: string
            example: "493079"
          description: "Die Gruppen-ID"

        - name: filter
          in: path
          required: true
          schema:
            type: string
            enum: 
              - gesamt
              - vr
              - rr
            default: gesamt
          description: "Zeitraum-Filter (gesamt = Gesamtspielplan, vr = Vorrunde/Hinrunde, rr = R√ºckrunde)"

        - name: _data
          in: query
          required: true
          schema:
            type: string
            default: "routes/click-tt+/$association+/$season+/$type+/$groupname.gruppe.$urlid+/spielplan.$filter"
            example: "routes/click-tt+/$association+/$season+/$type+/$groupname.gruppe.$urlid+/spielplan.$filter"
          description: "Muss exakt dieser String sein (URL-encoded beim Aufruf). Interne Remix Route-ID f√ºr Spielplan."

      responses:
        '200':
          description: Page Data mit Spielplan-Objekt
          content:
            application/json:
              schema:
                type: object
                properties:
                  season:
                    type: string
                    description: Saison
                  association:
                    $ref: '#/components/schemas/Association'
                  groupname:
                    type: string
                    description: Name der Gruppe/Liga
                  urlid:
                    type: string
                    description: Gruppen-ID
                  season_filter:
                    type: string
                    enum: [firstRound, secondRound]
                    description: Filter (firstRound = VR, secondRound = RR)
                  seasonType:
                    type: string
                    description: Typ der Saison
                  data:
                    type: object
                    properties:
                      remarks:
                        type: string
                        nullable: true
                        description: Anmerkungen zum Spielplan
                      meetings:
                        type: array
                        description: Begegnungen gruppiert nach Datum
                        items:
                          type: object
                          additionalProperties:
                            type: array
                            items:
                              type: object
                              properties:
                                date:
                                  type: string
                                  format: date-time
                                  description: Spielbeginn
                                live:
                                  type: boolean
                                  description: Ob das Spiel live ist
                                state:
                                  type: string
                                  enum: [scheduled, done]
                                  description: Status der Begegnung
                                pdf_url:
                                  type: string
                                  description: Link zum Spielbericht
                                end_date:
                                  type: string
                                  format: date-time
                                  description: Spielende
                                location:
                                  type: object
                                  properties:
                                    zip:
                                      type: string
                                      nullable: true
                                    city:
                                      type: string
                                      nullable: true
                                    label:
                                      type: string
                                      nullable: true
                                    street:
                                      type: string
                                      nullable: true
                                    country:
                                      type: string
                                      nullable: true
                                league_id:
                                  type: string
                                team_away:
                                  type: string
                                team_home:
                                  type: string
                                meeting_id:
                                  type: string
                                round_name:
                                  type: string
                                  nullable: true
                                round_type:
                                  type: string
                                hall_number:
                                  type: string
                                is_letter_h:
                                  type: boolean
                                  description: Hallenverlegung
                                is_letter_t:
                                  type: boolean
                                is_letter_u:
                                  type: boolean
                                is_letter_v:
                                  type: boolean
                                  description: Terminverlegung
                                is_letter_w:
                                  type: boolean
                                is_letter_z:
                                  type: boolean
                                league_name:
                                  type: string
                                matches_won:
                                  type: string
                                  description: Gewonnene Matches (Heimteam)
                                is_confirmed:
                                  type: boolean
                                is_letter_na:
                                  type: boolean
                                is_letter_w2:
                                  type: boolean
                                matches_lost:
                                  type: string
                                  description: Verlorene Matches (Heimteam)
                                team_away_id:
                                  type: string
                                team_home_id:
                                  type: string
                                letter_h_info:
                                  type: string
                                  nullable: true
                                  description: Info zur Hallenverlegung
                                letter_w_info:
                                  type: string
                                  nullable: true
                                letter_z_info:
                                  type: string
                                  nullable: true
                                original_date:
                                  type: string
                                  nullable: true
                                  format: date-time
                                  description: Urspr√ºnglicher Termin bei Verlegung
                                letter_na_info:
                                  type: string
                                  nullable: true
                                meeting_number:
                                  type: string
                                  nullable: true
                                league_short_name:
                                  type: string
                                team_away_club_id:
                                  type: string
                                team_home_club_id:
                                  type: string
                                is_meeting_complete:
                                  type: boolean
                                league_org_short_name:
                                  type: string
                                nu_score_live_enabled:
                                  type: boolean
                                is_provisionally_recorded:
                                  type: boolean
                      head_infos:
                        $ref: '#/components/schemas/FrontendHeadInfos'
                      round_type:
                        type: string
                        enum: [mixed]
                      pdf_version_url:
                        type: string
                        description: Link zum PDF-Spielplan
                      pdf_materials_url:
                        type: string
                        description: Link zum PDF mit Materialien
                  error:
                    type: string
                    nullable: true
              example:
                season: "25--26"
                association: "DTTB"
                groupname: "Tischtennis_Bundesliga"
                urlid: "493079"
                season_filter: "firstRound"
                seasonType: ""
                data:
                  remarks: null
                  meetings:
                    - "2025-08-27":
                        - date: "2025-08-27T17:00:00.000+00:00"
                          live: false
                          state: "done"
                          pdf_url: "https://dttb.click-tt.de/cgi-bin/WebObjects/nuLigaDokumentTTDE.woa/wa/nuDokument?dokument=MeetingReportTTFOP&meeting=15285692&historicalDataToken=bLKAWvi5PBUeJkdkqVxElA%3D%3D"
                          end_date: "2025-08-27T20:36:00.000+00:00"
                          location:
                            zip: "99974"
                            city: "M√ºhlhausen"
                            label: "LOTTO Th√ºringen Center Court"
                            street: "Kristanplatz 10"
                            country: "Deutschland"
                          league_id: "493079"
                          team_away: "ASC Gr√ºnwettersbach"
                          team_home: "Post SV M√ºhlhausen"
                          meeting_id: "15285692"
                          round_name: null
                          round_type: "0"
                          hall_number: "1"
                          is_letter_h: false
                          is_letter_t: false
                          is_letter_u: false
                          is_letter_v: false
                          is_letter_w: false
                          is_letter_z: false
                          league_name: "Tischtennis Bundesliga"
                          matches_won: "3"
                          is_confirmed: true
                          is_letter_na: false
                          is_letter_w2: false
                          matches_lost: "1"
                          team_away_id: "2953167"
                          team_home_id: "2953194"
                          letter_h_info: null
                          letter_w_info: null
                          letter_z_info: null
                          original_date: null
                          letter_na_info: null
                          meeting_number: null
                          league_short_name: "BL1 E"
                          team_away_club_id: "412"
                          team_home_club_id: "109017"
                          is_meeting_complete: true
                          league_org_short_name: "DTTB"
                          nu_score_live_enabled: false
                          is_provisionally_recorded: false
                    - "2025-08-30":
                        - date: "2025-08-30T13:00:00.000+00:00"
                          live: false
                          state: "done"
                          pdf_url: "https://dttb.click-tt.de/cgi-bin/WebObjects/nuLigaDokumentTTDE.woa/wa/nuDokument?dokument=MeetingReportTTFOP&meeting=15285897&historicalDataToken=bLKAWvi5PBUeJkdkqVxElA%3D%3D"
                          end_date: "2025-08-30T16:25:00.000+00:00"
                          location:
                            zip: "28205"
                            city: "Bremen"
                            label: "Klaus-Dieter-Fischer-Halle"
                            street: "Hermine-Berthold-Stra√üe 20"
                            country: "Deutschland"
                          league_id: "493079"
                          team_away: "TTC OE Clarity Telefonie-Systeme Bad Homburg e.V."
                          team_home: "SV Werder Bremen"
                          meeting_id: "15285897"
                          round_name: null
                          round_type: "0"
                          hall_number: "1"
                          is_letter_h: false
                          is_letter_t: false
                          is_letter_u: false
                          is_letter_v: false
                          is_letter_w: false
                          is_letter_z: false
                          league_name: "Tischtennis Bundesliga"
                          matches_won: "3"
                          is_confirmed: true
                          is_letter_na: false
                          is_letter_w2: false
                          matches_lost: "2"
                          team_away_id: "2953217"
                          team_home_id: "2953155"
                          letter_h_info: null
                          letter_w_info: null
                          letter_z_info: null
                          original_date: null
                          letter_na_info: null
                          meeting_number: null
                          league_short_name: "BL1 E"
                          team_away_club_id: "31024"
                          team_home_club_id: "42"
                          is_meeting_complete: true
                          league_org_short_name: "DTTB"
                          nu_score_live_enabled: false
                          is_provisionally_recorded: false
                  head_infos:
                    season: "25/26"
                    play_mode: "TTBL Spielsystem inkl. Doppel"
                    league_name: "Tischtennis Bundesliga"
                    championship: "DTTB 25/26"
                    gender_age_group: "Erwachsene"
                    organization_short: "DTTB"
                  round_type: "mixed"
                  pdf_version_url: "https://dttb.click-tt.de/cgi-bin/WebObjects/nuLigaDokumentTTDE.woa/wa/nuDokument?dokument=ScheduleReportFOP&type=small&roundTyp=vorrunde&group=493079"
                  pdf_materials_url: "https://dttb.click-tt.de/cgi-bin/WebObjects/nuLigaDokumentTTDE.woa/wa/nuDokument?dokument=TeamMaterialsFOP&group=493079"
                error: null

  /click-tt/{association}/{season}/ligen/{league_slug}/gruppe/{groupId}/kontakte:
    get:
      tags:
        - Ligen & Gruppen
      operationId: getFrontendContacts
      summary: Gruppen-Kontakte abrufen
      description: |
        L√§dt die Kontaktseite einer Liga.
        Enth√§lt oft:
        * Staffelleitung (Kontaktdaten)
        * Mannschaftsf√ºhrung aller Teams
        * Spiellokale (Adressen)
      security: []
      parameters:
        - $ref: '#/components/parameters/association'
        
        - name: season
          in: path
          required: true
          schema:
            type: string
            example: "25--26"
          description: "Saison (z.B. 25--26)"

        - name: league_slug
          in: path
          required: true
          schema:
            type: string
            example: "Tischtennis_Bundesliga"
            default: "x"
          description: "Name der Liga (URL-Slug)."

        - name: groupId
          in: path
          required: true
          schema:
            type: string
            example: "493079"
          description: "Die Gruppen-ID"

        - name: _data
          in: query
          required: true
          schema:
            type: string
            default: "routes/click-tt+/$association+/$season+/$type+/$groupname.gruppe.$urlid+/kontakte"
            example: "routes/click-tt+/$association+/$season+/$type+/$groupname.gruppe.$urlid+/kontakte"
          description: "Muss exakt dieser String sein (URL-encoded beim Aufruf). Interne Remix Route-ID f√ºr Kontakte."

      responses:
        '200':
          description: Kontakt-Informationen
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      teams:
                        type: array
                        description: Liste aller Teams mit Kontaktdaten
                        items:
                          type: object
                          properties:
                            club_id:
                              type: string
                            club_name:
                              type: string
                            team_name:
                              type: string
                            team_contact:
                              type: object
                              properties:
                                city:
                                  type: string
                                  nullable: true
                                label:
                                  type: string
                                street:
                                  type: string
                                  nullable: true
                                zipcode:
                                  type: string
                                  nullable: true
                                email_home:
                                  type: string
                                  nullable: true
                                email_work:
                                  type: string
                                  nullable: true
                                phone_home:
                                  type: string
                                  nullable: true
                                phone_work:
                                  type: string
                                  nullable: true
                                contact_name:
                                  type: string
                                phone_mobile:
                                  type: string
                                  nullable: true
                            club_contacts:
                              type: array
                              description: Kontaktadresse(n) und Spiellokale
                              items:
                                type: object
                                properties:
                                  city:
                                    type: string
                                    nullable: true
                                  label:
                                    type: string
                                  street:
                                    type: string
                                    nullable: true
                                  website:
                                    type: string
                                    nullable: true
                                  zipcode:
                                    type: string
                                    nullable: true
                                  email_home:
                                    type: string
                                    nullable: true
                                  email_work:
                                    type: string
                                    nullable: true
                                  phone_home:
                                    type: string
                                    nullable: true
                                  phone_work:
                                    type: string
                                    nullable: true
                                  contact_name:
                                    type: string
                                  phone_mobile:
                                    type: string
                                    nullable: true
                      head_infos:
                        $ref: '#/components/schemas/FrontendHeadInfos'
                      no_meetings:
                        type: boolean
                      season_list:
                        type: array
                        description: Verf√ºgbare Saisons
                        items:
                          $ref: '#/components/schemas/FrontendSeasonListItem'
                      group_leader:
                        type: object
                        description: Staffelleiter
                        properties:
                          city:
                            type: string
                          street:
                            type: string
                          zipcode:
                            type: string
                          email_home:
                            type: string
                            nullable: true
                          email_work:
                            type: string
                            nullable: true
                          phone_home:
                            type: string
                            nullable: true
                          phone_work:
                            type: string
                            nullable: true
                          contact_name:
                            type: string
                          phone_mobile:
                            type: string
                            nullable: true
                      meetings_excerpt:
                        type: object
                        description: Aktuelle Begegnungen (wie im Spielplan)
                  season:
                    type: string
                  association:
                    $ref: '#/components/schemas/Association'
                  groupname:
                    type: string
                  urlid:
                    type: string
                  error:
                    type: string
                    nullable: true
              example:
                data:
                  teams:
                    - club_id: "13118"
                      club_name: "Borussia D√ºsseldorf"
                      team_name: "Borussia D√ºsseldorf"
                      team_contact:
                        city: "D√ºsseldorf"
                        label: "Mannschaftskontakt"
                        street: "Borussia-D√ºsseldorf-Stra√üe 1"
                        zipcode: "40629"
                        email_home: "m.mustermann@beispiel-verein.de"
                        email_work: null
                        phone_home: null
                        phone_work: "0211-1234567"
                        contact_name: "Max Mustermann"
                        phone_mobile: "0170-1234567"
                      club_contacts:
                        - city: "D√ºsseldorf"
                          label: "Kontaktadresse"
                          street: "Borussia-D√ºsseldorf-Stra√üe 1"
                          website: "www.beispiel-verein.de"
                          zipcode: "40629"
                          email_home: "info@beispiel-verein.de"
                          email_work: null
                          phone_home: "ACHTUNG EINLADUNGEN UNTER AMATEURABT."
                          phone_work: "0211 / 99179-0"
                          contact_name: "Gesch√§ftsstelle"
                          phone_mobile: null
                        - city: "D√ºsseldorf"
                          label: "Spiellokal 1"
                          street: "Borussia-D√ºsseldorf-Stra√üe 1 Parken auf P+R Staufenplatz"
                          website: "www.beispiel-verein.de"
                          zipcode: "40629"
                          email_home: "info@beispiel-verein.de"
                          email_work: null
                          phone_home: "0211 / 99179-0"
                          phone_work: null
                          contact_name: "ARAG CenterCourt"
                          phone_mobile: null
                    - club_id: "42"
                      club_name: "SV Werder Bremen"
                      team_name: "SV Werder Bremen"
                      team_contact:
                        city: "Bremen"
                        label: "Mannschaftskontakt"
                        street: "Musterstra√üe 9"
                        zipcode: "28279"
                        email_home: "e.musterfrau@beispiel.de"
                        email_work: null
                        phone_home: "0421-7654321"
                        phone_work: "0421-9876543"
                        contact_name: "Erika Musterfrau"
                        phone_mobile: "0171-7654321"
                      club_contacts:
                        - city: null
                          label: "Kontaktadresse"
                          street: null
                          website: "http://www.beispiel-verein.de/tischtennis/"
                          zipcode: null
                          email_home: "abteilungsleiter@beispiel.de"
                          email_work: null
                          phone_home: null
                          phone_work: null
                          contact_name: "Peter Beispiel"
                          phone_mobile: "0172-1234567"
                        - city: "Bremen"
                          label: "Spiellokal 1"
                          street: "Hermine-Berthold-Stra√üe 20"
                          website: null
                          zipcode: "28205"
                          email_home: null
                          email_work: null
                          phone_home: null
                          phone_work: null
                          contact_name: "Klaus-Dieter-Fischer-Halle"
                          phone_mobile: null
                  head_infos:
                    season: null
                    play_mode: null
                    league_name: null
                    championship: null
                    gender_age_group: null
                    organization_short: "DTTB"
                  no_meetings: false
                  season_list:
                    - name: "24/25"
                      full_name: "2024/25"
                    - name: "25/26"
                      full_name: "2025/26"
                  group_leader:
                    city: "Fulda"
                    street: "Beispielstra√üe 12"
                    zipcode: "36037"
                    email_home: "staffelleiter@beispiel.de"
                    email_work: null
                    phone_home: null
                    phone_work: "0661-1234567"
                    contact_name: "Hans Beispiel"
                    phone_mobile: null
                season: "25--26"
                association: "DTTB"
                groupname: "Tischtennis_Bundesliga"
                urlid: "493079"
                error: null

  /click-tt/{association}/{season}/ligen/{league_slug}/gruppe/{groupId}/bilanzuebersichten/{filter}:
    get:
      tags:
        - Ligen & Gruppen
      operationId: getFrontendBalanceSheet
      summary: Gruppen-Bilanzen abrufen
      description: |
        L√§dt die Bilanz√ºbersicht (Siege/Niederlagen pro Person) f√ºr die gesamte Liga.
        Wird genutzt, um die "Bilanzen"-Reiter auf der Webseite darzustellen.
      security: []
      parameters:
        - $ref: '#/components/parameters/association'
        
        - name: season
          in: path
          required: true
          schema:
            type: string
            example: "25--26"

        - name: league_slug
          in: path
          required: true
          schema:
            type: string
            example: "Tischtennis_Bundesliga"

        - name: groupId
          in: path
          required: true
          schema:
            type: string
            example: "493079"

        - name: filter
          in: path
          required: true
          schema:
            type: string
            enum: [gesamt, vr, rr]
            default: gesamt
          description: "Zeitraum: Vorrunde (vr), R√ºckrunde (rr) oder Gesamt."

        - name: _data
          in: query
          required: true
          schema:
            type: string
            default: "routes/click-tt+/$association+/$season+/$type+/$groupname.gruppe.$urlid+/bilanzuebersichten.$filter"
            example: "routes/click-tt+/$association+/$season+/$type+/$groupname.gruppe.$urlid+/bilanzuebersichten.$filter"
          description: "Muss exakt dieser String sein (URL-encoded beim Aufruf). Interne Remix Route-ID f√ºr Bilanz√ºbersichten."

      responses:
        '200':
          description: Liste der Mannschaften und Spieler mit Bilanzen
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      head_infos:
                        $ref: '#/components/schemas/FrontendHeadInfos'
                      no_meetings:
                        type: boolean
                      season_list:
                        type: array
                        items:
                          $ref: '#/components/schemas/FrontendSeasonListItem'
                      balancesheet:
                        type: array
                        description: Bilanz√ºbersicht aller Teams
                        items:
                          type: object
                          properties:
                            club_id:
                              type: string
                            team_id:
                              type: string
                            team_name:
                              type: string
                            team_total_points_won:
                              type: integer
                            team_double_points_won:
                              type: integer
                              nullable: true
                            team_single_points_won:
                              type: integer
                            team_total_points_lost:
                              type: integer
                            team_double_points_lost:
                              type: integer
                              nullable: true
                            team_single_points_lost:
                              type: integer
                            double_player_statistics:
                              type: array
                              nullable: true
                              description: Doppel-Statistiken (falls vorhanden)
                              items:
                                type: object
                                properties:
                                  points_won:
                                    type: string
                                  id_player_1:
                                    type: string
                                  id_player_2:
                                    type: string
                                  points_lost:
                                    type: string
                                  meeting_count:
                                    type: string
                                  lastname_player_1:
                                    type: string
                                  lastname_player_2:
                                    type: string
                                  firstname_player_1:
                                    type: string
                                  firstname_player_2:
                                    type: string
                            single_player_statistics:
                              type: array
                              description: Einzel-Spielerstatistiken
                              items:
                                type: object
                                properties:
                                  player_id:
                                    type: string
                                  points_won:
                                    type: string
                                  player_rank:
                                    type: string
                                  points_lost:
                                    type: string
                                  team_number:
                                    type: string
                                  meeting_count:
                                    type: string
                                  player_lastname:
                                    type: string
                                  player_firstname:
                                    type: string
                                  single_statistics:
                                    type: array
                                    description: Bilanz gegen verschiedene Positionen
                                    items:
                                      type: object
                                      properties:
                                        points_won:
                                          type: string
                                        points_lost:
                                          type: string
                                        opponent_rank:
                                          type: string
                      meetings_excerpt:
                        type: object
                        description: Aktuelle Begegnungen (wie im Spielplan)
                  season:
                    type: string
                  association:
                    $ref: '#/components/schemas/Association'
                  groupname:
                    type: string
                  season_filter:
                    type: string
                    enum: [firstRound, secondRound]
                  urlid:
                    type: string
                  error:
                    type: string
                    nullable: true
              example:
                data:
                  head_infos:
                    season: "25/26"
                    play_mode: "TTBL Spielsystem inkl. Doppel"
                    league_name: "Tischtennis Bundesliga"
                    championship: "DTTB 25/26"
                    gender_age_group: "Erwachsene"
                    organization_short: "DTTB"
                  no_meetings: false
                  season_list:
                    - name: "24/25"
                      full_name: "2024/25"
                    - name: "25/26"
                      full_name: "2025/26"
                  balancesheet:
                    - club_id: "13118"
                      team_id: "2953148"
                      team_name: "Borussia D√ºsseldorf"
                      team_total_points_won: 22
                      team_double_points_won: null
                      team_single_points_won: 22
                      team_total_points_lost: 12
                      team_double_points_lost: null
                      team_single_points_lost: 12
                      double_player_statistics: null
                      single_player_statistics:
                        - player_id: "NU7535"
                          points_won: "5"
                          player_rank: "1"
                          points_lost: "0"
                          team_number: "1"
                          meeting_count: "4"
                          player_lastname: "Qiu"
                          player_firstname: "Dang"
                          single_statistics:
                            - points_won: "2"
                              points_lost: "0"
                              opponent_rank: "1"
                            - points_won: "2"
                              points_lost: "0"
                              opponent_rank: "2"
                            - points_won: "1"
                              points_lost: "0"
                              opponent_rank: "3"
                        - player_id: "NU1462405"
                          points_won: "7"
                          player_rank: "2"
                          points_lost: "2"
                          team_number: "1"
                          meeting_count: "8"
                          player_lastname: "K√§llberg"
                          player_firstname: "Anton"
                          single_statistics:
                            - points_won: "3"
                              points_lost: "1"
                              opponent_rank: "1"
                            - points_won: "0"
                              points_lost: "1"
                              opponent_rank: "2"
                            - points_won: "4"
                              points_lost: "0"
                              opponent_rank: "3"
                    - club_id: "42"
                      team_id: "2953155"
                      team_name: "SV Werder Bremen"
                      team_total_points_won: 22
                      team_double_points_won: 2
                      team_single_points_won: 20
                      team_total_points_lost: 12
                      team_double_points_lost: 0
                      team_single_points_lost: 12
                      double_player_statistics:
                        - points_won: "1"
                          id_player_1: "NU1463029"
                          id_player_2: "NU1464105"
                          points_lost: "0"
                          meeting_count: "1"
                          lastname_player_1: "Gerassimenko"
                          lastname_player_2: "Bertrand"
                          firstname_player_1: "Kirill"
                          firstname_player_2: "Irvin"
                      single_player_statistics:
                        - player_id: "NU1463029"
                          points_won: "6"
                          player_rank: "1"
                          points_lost: "6"
                          team_number: "1"
                          meeting_count: "9"
                          player_lastname: "Gerassimenko"
                          player_firstname: "Kirill"
                          single_statistics:
                            - points_won: "1"
                              points_lost: "2"
                              opponent_rank: "1"
                            - points_won: "4"
                              points_lost: "3"
                              opponent_rank: "2"
                            - points_won: "1"
                              points_lost: "1"
                              opponent_rank: "3"
                season: "25--26"
                association: "DTTB"
                groupname: "Tischtennis_Bundesliga"
                season_filter: "firstRound"
                urlid: "493079"
                error: null

  /click-tt/{association}/{season}/ligen/{league_slug}/gruppe/{groupId}/mannschaftsmeldungen/{filter}:
    get:
      tags:
        - Ligen & Gruppen
      operationId: getFrontendTeamRegistrations
      summary: Mannschaftsmeldungen abrufen
      description: |
        L√§dt die offiziellen Mannschaftsmeldungen der Gruppe.
        Zeigt die **Aufstellungsreihenfolge** (Brett 1.1, 1.2...), den Q-TTR-Wert der Meldung und Status-Vermerke (SBE, NES).
      security: []
      parameters:
        - $ref: '#/components/parameters/association'
        
        - name: season
          in: path
          required: true
          schema:
            type: string
            example: "25--26"

        - name: league_slug
          in: path
          required: true
          schema:
            type: string
            example: "Tischtennis_Bundesliga"

        - name: groupId
          in: path
          required: true
          schema:
            type: string
            example: "493079"

        - name: filter
          in: path
          required: true
          schema:
            type: string
            enum: [vr, rr]
            default: vr
          description: "Vorrunde (vr) oder R√ºckrunde (rr). Bestimmt die Aufstellung der Halbserie."

        - name: _data
          in: query
          required: true
          schema:
            type: string
            default: "routes/click-tt+/$association+/$season+/$type+/$groupname.gruppe.$urlid+/mannschaftsmeldungen.$filter"
            example: "routes/click-tt+/$association+/$season+/$type+/$groupname.gruppe.$urlid+/mannschaftsmeldungen.$filter"
          description: "Muss exakt dieser String sein (URL-encoded beim Aufruf). Interne Remix Route-ID f√ºr Mannschaftsmeldungen."

      responses:
        '200':
          description: Liste aller Mannschaften mit Spielern
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      teampools:
                        type: array
                        description: Liste aller Teams mit ihren gemeldeten Personen
                        items:
                          type: object
                          properties:
                            clubnr:
                              type: string
                              description: Vereinsnummer
                              example: "13118"
                            teampool:
                              type: array
                              nullable: true
                              description: Liste der gemeldeten Personen (null wenn noch keine Meldung)
                              items:
                                type: object
                                properties:
                                  player_id:
                                    type: string
                                    description: Spieler-ID (myTT NU-Nummer)
                                    example: "NU7535"
                                  player_qttr:
                                    type: integer
                                    description: Q-TTR-Wert des Spielers
                                    example: 2623
                                  player_rank:
                                    type: integer
                                    description: Rangnummer/Brett (1.1, 1.2, ...)
                                    example: 1
                                  team_number:
                                    type: integer
                                    description: Mannschaftsnummer
                                    example: 1
                                  player_status:
                                    type: string
                                    nullable: true
                                    description: Status-Vermerk (z. B. SBE, NES)
                                    example: null
                                  foreigner_type:
                                    type: string
                                    nullable: true
                                    description: Ausl√§ndertyp (A = Ausl√§nder, eA = EU-Ausl√§nder)
                                    example: "eA"
                                  player_lastname:
                                    type: string
                                    description: Nachname
                                    example: "Qiu"
                                  player_firstname:
                                    type: string
                                    description: Vorname
                                    example: "Dang"
                            club_name:
                              type: string
                              description: Vollst√§ndiger Vereinsname
                              example: "Borussia D√ºsseldorf"
                            team_name:
                              type: string
                              description: Vollst√§ndiger Teamname
                              example: "Borussia D√ºsseldorf"
                            organisation_short:
                              type: string
                              description: K√ºrzel des Regionalverbands
                              example: "WTTV"
                      head_infos:
                        $ref: '#/components/schemas/FrontendHeadInfos'
                      no_meetings:
                        type: boolean
                        description: Gibt an, ob Begegnungen vorhanden sind
                        example: false
                      season_list:
                        type: array
                        description: Liste aller verf√ºgbaren Saisons
                        items:
                          $ref: '#/components/schemas/FrontendSeasonListItem'
                      meetings_excerpt:
                        $ref: '#/components/schemas/FrontendMeetingsExcerpt'
                  season:
                    type: string
                    example: "25--26"
                  association:
                    $ref: '#/components/schemas/Association'
                  groupname:
                    type: string
                    example: "Tischtennis_Bundesliga"
                  urlid:
                    type: string
                    example: "493079"
                  error:
                    type: string
                    nullable: true

  /click-tt/{association}/{season}/ligen/{league_slug}/gruppe/{groupId}/gruppen-ranglisten/{match_type}/{filter}:
    get:
      tags:
        - Ligen & Gruppen
      operationId: getFrontendGroupRankings
      summary: Gruppen-Ranglisten abrufen
      description: |
        L√§dt die Ranglisten der Gruppe (Top-Bilanzen).
        Unterst√ºtzt Filterung nach **Einzel (spieler)** oder **Doppel** sowie nach **Vor-/R√ºckrunde**.
      security: []
      parameters:
        - $ref: '#/components/parameters/association'
        
        - name: season
          in: path
          required: true
          schema:
            type: string
            example: "25--26"

        - name: league_slug
          in: path
          required: true
          schema:
            type: string
            example: "Tischtennis_Bundesliga"
            default: "x"

        - name: groupId
          in: path
          required: true
          schema:
            type: string
            example: "493079"

        - name: match_type
          in: path
          required: true
          schema:
            type: string
            enum: [spieler, doppel]
            default: spieler
          description: "Auswahl zwischen Einzel-Rangliste ('spieler') oder Doppel-Rangliste ('doppel')."

        - name: filter
          in: path
          required: true
          schema:
            type: string
            enum: [gesamt, vr, rr]
            default: vr
          description: "Zeitraum: Vorrunde (vr), R√ºckrunde (rr) oder Gesamt."

        - name: _data
          in: query
          required: true
          schema:
            type: string
            default: "routes/click-tt+/$association+/$season+/$type+/$groupname.gruppe.$urlid+/gruppen-ranglisten.$match_type.$filter"
            example: "routes/click-tt+/$association+/$season+/$type+/$groupname.gruppe.$urlid+/gruppen-ranglisten.$match_type.$filter"
          description: "Muss exakt dieser String sein (URL-encoded beim Aufruf). Interne Remix Route-ID f√ºr Gruppen-Ranglisten."

      responses:
        '200':
          description: Ranglisten-Daten (Format abh√§ngig von match_type Parameter)
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      ranking:
                        type: array
                        description: Liste der Top-Personen oder Doppel sortiert nach Bilanz
                        items:
                          oneOf:
                            - type: object
                              description: Einzelspieler-Rangliste (match_type=spieler)
                              properties:
                                clubnr:
                                  type: string
                                  description: Vereinsnummer
                                  example: "04029"
                                team_id:
                                  type: string
                                  description: Team-ID
                                  example: "2953157"
                                player_id:
                                  type: string
                                  description: Spieler-ID (myTT NU-Nummer)
                                  example: "NU1829889"
                                team_name:
                                  type: string
                                  description: Name der Mannschaft
                                  example: "TTF Liebherr Ochsenhausen"
                                player_rank:
                                  type: integer
                                  description: Rang in der Rangliste
                                  example: 1
                                player_rating:
                                  type: string
                                  description: Bewertung (meist "0.000")
                                  example: "0.000"
                                player_lastname:
                                  type: string
                                  description: Nachname des Spielers
                                  example: "Chirita"
                                player_firstname:
                                  type: string
                                  description: Vorname des Spielers
                                  example: "Iulian"
                                player_team_rank:
                                  type: integer
                                  description: Rang innerhalb der Mannschaft
                                  example: 1
                                player_matches_won:
                                  type: integer
                                  description: Anzahl gewonnener Spiele
                                  example: 9
                                player_team_number:
                                  type: integer
                                  description: Mannschaftsnummer
                                  example: 1
                                player_matches_lost:
                                  type: integer
                                  description: Anzahl verlorener Spiele
                                  example: 0
                                player_position_statistics:
                                  type: array
                                  description: Bilanz aufgeschl√ºsselt nach Position (1, 2, 3)
                                  items:
                                    type: object
                                    properties:
                                      position:
                                        type: integer
                                        description: Position im Spielsystem (1 = oberes Paarkreuz, 2 = mittleres, 3 = unteres)
                                        example: 1
                                      position_matches_won:
                                        type: integer
                                        description: Gewonnene Spiele auf dieser Position
                                        example: 4
                                      position_matches_lost:
                                        type: integer
                                        description: Verlorene Spiele auf dieser Position
                                        example: 0
                            - type: object
                              description: Doppel-Rangliste (match_type=doppel)
                              properties:
                                clubnr:
                                  type: string
                                  description: Vereinsnummer
                                  example: "21033"
                                team_id:
                                  type: string
                                  description: Team-ID
                                  example: "2953176"
                                team_name:
                                  type: string
                                  description: Name der Mannschaft
                                  example: "TTC Rh√∂nSprudel Fulda-Maberzell"
                                double_rank:
                                  type: string
                                  description: Rang in der Doppel-Rangliste
                                  example: "1"
                                player_1_id:
                                  type: string
                                  description: Spieler-ID des ersten Doppelpartners
                                  example: "NU94325"
                                player_2_id:
                                  type: string
                                  description: Spieler-ID des zweiten Doppelpartners
                                  example: "NU595610"
                                player_1_lastname:
                                  type: string
                                  description: Nachname des ersten Spielers
                                  example: "Ovtcharov"
                                player_2_lastname:
                                  type: string
                                  description: Nachname des zweiten Spielers
                                  example: "Meng"
                                player_1_firstname:
                                  type: string
                                  description: Vorname des ersten Spielers
                                  example: "Dimitrij"
                                player_2_firstname:
                                  type: string
                                  description: Vorname des zweiten Spielers
                                  example: "Fan Bo"
                                double_matches_won:
                                  type: string
                                  description: Anzahl gewonnener Doppel-Spiele
                                  example: "3"
                                double_matches_lost:
                                  type: string
                                  description: Anzahl verlorener Doppel-Spiele
                                  example: "0"
                                double_matches_diff:
                                  type: string
                                  description: Differenz zwischen gewonnenen und verlorenen Spielen
                                  example: "3"
                      head_infos:
                        $ref: '#/components/schemas/FrontendHeadInfos'
                      no_meetings:
                        type: boolean
                        description: Gibt an, ob Begegnungen vorhanden sind
                        example: false
                      season_list:
                        type: array
                        description: Liste aller verf√ºgbaren Saisons
                        items:
                          $ref: '#/components/schemas/FrontendSeasonListItem'
                      meetings_excerpt:
                        $ref: '#/components/schemas/FrontendMeetingsExcerpt'
                  season:
                    type: string
                    example: "25--26"
                  association:
                    $ref: '#/components/schemas/Association'
                  groupname:
                    type: string
                    example: "Tischtennis_Bundesliga"
                  match_type:
                    type: string
                    enum: [spieler, doppel]
                    description: "Einzel (spieler) oder Doppel"
                    example: "spieler"
                  urlid:
                    type: string
                    example: "493079"
                  season_filter:
                    type: string
                    description: "Intern verwendeter Saison-Filter"
                    example: "firstRound"
                  error:
                    type: string
                    nullable: true

  /click-tt/{association}/{season}/ligen/{league_slug}/gruppe/{groupId}/zuschauer-matrix:
    get:
      tags:
        - Ligen & Gruppen
      operationId: getFrontendAttendanceMatrix
      summary: Zuschauer-Matrix abrufen
      description: |
        L√§dt die Zuschauerzahlen der Liga als Matrix.
        Zeigt an, wie viele Zuschauer bei welcher Begegnung anwesend waren (nur in Ligen relevant, wo das erfasst wird).
      security: []
      parameters:
        - $ref: '#/components/parameters/association'
        
        - name: season
          in: path
          required: true
          schema:
            type: string
            example: "25--26"

        - name: league_slug
          in: path
          required: true
          schema:
            type: string
            example: "Tischtennis_Bundesliga"
            default: "x"

        - name: groupId
          in: path
          required: true
          schema:
            type: string
            example: "493079"

        - name: _data
          in: query
          required: true
          schema:
            type: string
            default: "routes/click-tt+/$association+/$season+/$type+/$groupname.gruppe.$urlid+/zuschauer-matrix"
            example: "routes/click-tt+/$association+/$season+/$type+/$groupname.gruppe.$urlid+/zuschauer-matrix"
          description: "Muss exakt dieser String sein (URL-encoded beim Aufruf). Interne Remix Route-ID f√ºr Zuschauer-Matrix."

      responses:
        '200':
          description: Zuschauer-Matrix-Daten mit Durchschnittswerten und detaillierter Matrix
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      means:
                        type: array
                        description: Durchschnittliche Zuschauerzahlen pro Team als Gastmannschaft
                        items:
                          type: object
                          properties:
                            team_guest_id:
                              type: string
                              description: Team-ID der Gastmannschaft
                              example: "2953148"
                            team_guest_mean_attendance:
                              type: string
                              description: Durchschnittliche Zuschauerzahl als Gast
                              example: "635"
                      teams:
                        type: array
                        description: Matrix der Zuschauerzahlen f√ºr jedes Team
                        items:
                          type: object
                          properties:
                            team_id:
                              type: string
                              description: Team-ID
                              example: "2953148"
                            team_name:
                              type: string
                              description: Name der Mannschaft
                              example: "Borussia D√ºsseldorf"
                            team_rank:
                              type: string
                              description: Tabellenplatz
                              example: "1"
                            meeting_attendances:
                              type: array
                              description: Zuschauerzahlen f√ºr jede Begegnung gegen andere Teams
                              items:
                                type: object
                                properties:
                                  opponent_name:
                                    type: string
                                    description: Name des Gegners
                                    example: "SV Werder Bremen"
                                  opponent_rank:
                                    type: string
                                    description: Tabellenplatz des Gegners
                                    example: "2"
                                  opponent_team_id:
                                    type: string
                                    description: Team-ID des Gegners
                                    example: "2953155"
                                  meetings_attendance:
                                    type: string
                                    description: Zuschauerzahl bei der Begegnung (Zahl oder Datum im Format DD.MM f√ºr zuk√ºnftige Spiele, "***" f√ºr Heimspiele gegen sich selbst)
                                    example: "650"
                            team_home_mean_attendance:
                              type: string
                              description: Durchschnittliche Zuschauerzahl bei Heimspielen
                              example: "720"
                            team_home_total_attendance:
                              type: string
                              description: Gesamte Zuschauerzahl bei Heimspielen
                              example: "2880"
                      totals:
                        type: array
                        description: Gesamte Zuschauerzahlen pro Team als Gastmannschaft
                        items:
                          type: object
                          properties:
                            team_guest_id:
                              type: string
                              description: Team-ID der Gastmannschaft
                              example: "2953148"
                            team_guest_total_attendance:
                              type: string
                              description: Gesamte Zuschauerzahl als Gast
                              example: "3177"
                      head_infos:
                        type: object
                        properties:
                          season:
                            type: string
                            example: "25/26"
                          play_mode:
                            type: string
                            example: "TTBL Spielsystem inkl. Doppel"
                          league_name:
                            type: string
                            example: "Tischtennis Bundesliga"
                          championship:
                            type: string
                            example: "DTTB 25/26"
                          gender_age_group:
                            type: string
                            example: "Erwachsene"
                          organization_short:
                            type: string
                            example: "DTTB"
                      no_meetings:
                        type: boolean
                        description: Gibt an, ob Begegnungen vorhanden sind
                        example: false
                      season_list:
                        type: array
                        description: Liste aller verf√ºgbaren Saisons
                        items:
                          $ref: '#/components/schemas/FrontendSeasonListItem'
                      meetings_excerpt:
                        $ref: '#/components/schemas/FrontendMeetingsExcerpt'
                  season:
                    type: string
                    example: "25--26"
                  association:
                    $ref: '#/components/schemas/Association'
                  groupname:
                    type: string
                    example: "Tischtennis_Bundesliga"
                  urlid:
                    type: string
                    example: "493079"
                  error:
                    type: string
                    nullable: true

  /click-tt/{association}/{season}/ligen/{league_slug}/gruppe/{groupId}/mannschaft/{teamId}/{teamName}/spielerbilanzen/{filter}:
    get:
      tags:
        - Mannschaften
      operationId: getFrontendTeamPlayerBalances
      summary: Mannschafts-Spielerbilanzen abrufen
      description: |
        L√§dt die detaillierten Bilanzen (Eins√§tze, Siege/Niederlagen) aller Mitglieder einer spezifischen Mannschaft.
        Erm√∂glicht Filterung nach **Vorrunde (vr)**, **R√ºckrunde (rr)** oder **Gesamt**.
      security: []
      parameters:
        - $ref: '#/components/parameters/association'
        
        - name: season
          in: path
          required: true
          schema:
            type: string
            example: "25--26"
          description: "Saison (z.B. 25--26)"

        - name: league_slug
          in: path
          required: true
          schema:
            type: string
            example: "Tischtennis_Bundesliga"
          description: "Name der Liga (URL-Slug)"

        - name: groupId
          in: path
          required: true
          schema:
            type: string
            example: "493079"
          description: "ID der Gruppe/Liga"

        - name: teamId
          in: path
          required: true
          schema:
            type: string
            example: "2953148"
          description: "ID der Mannschaft"

        - name: teamName
          in: path
          required: true
          schema:
            type: string
            example: "Borussia_Duesseldorf"
          description: "Name der Mannschaft (URL-Slug). Technisch oft irrelevant, aber n√∂tig f√ºr die URL-Struktur."

        - name: filter
          in: path
          required: true
          schema:
            type: string
            enum: [gesamt, vr, rr]
            default: gesamt
          description: "Zeitraum-Filter (gesamt, vr = Vorrunde, rr = R√ºckrunde)"

        - name: _data
          in: query
          required: true
          schema:
            type: string
            default: "routes/click-tt+/$association+/$season+/$type+/($groupname).gruppe.$urlid_.mannschaft.$teamid.$teamname+/spielerbilanzen.$filter"
          description: "Interne Remix Route-ID (muss exakt dieser String sein, URL-encoded beim Aufruf)."

      responses:
        '200':
          description: Bilanzen der Mannschaftsmitglieder
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      head_infos:
                        $ref: '#/components/schemas/FrontendHeadInfos'
                      player_balances:
                        type: array
                        description: Aufstellungsliste mit ihren Bilanzen
                        items:
                          type: object
                          properties:
                            player_id:
                              type: string
                              description: Spieler-ID (NU-Nummer)
                              example: "NU7535"
                            player_firstname:
                              type: string
                              example: "Dang"
                            player_lastname:
                              type: string
                              example: "Qiu"
                            meetings_count:
                              type: integer
                              description: Anzahl der Eins√§tze
                              example: 4
                            points_won:
                              type: integer
                              description: Gewonnene Punkte
                              example: 5
                            points_lost:
                              type: integer
                              description: Verlorene Punkte
                              example: 0
                      meetings_excerpt:
                        $ref: '#/components/schemas/FrontendMeetingsExcerpt'
                  season:
                    type: string
                    example: "25--26"
                  association:
                    $ref: '#/components/schemas/Association'
                  error:
                    type: string
                    nullable: true

  /click-tt/{association}/{season}/ligen/{league_slug}/gruppe/{groupId}/mannschaft/{teamId}/{teamName}/spielplan/{filter}:
    get:
      tags:
        - Mannschaften
      operationId: getFrontendTeamSchedule
      summary: Mannschafts-Spielplan abrufen
      description: |
        L√§dt den Spielplan einer spezifischen Mannschaft im Kontext einer Liga.
        Erm√∂glicht Filterung nach **Vorrunde (vr)**, **R√ºckrunde (rr)** oder **Gesamt**.
        
        *Alternative:* Der Endpunkt `/api/ttr/team/schedule` liefert die gleichen Spieldaten, oft einfacher zu nutzen.
      security: []
      parameters:
        - $ref: '#/components/parameters/association'
        
        - name: season
          in: path
          required: true
          schema:
            type: string
            example: "25--26"
          description: "Saison (z.B. 25--26)"

        - name: league_slug
          in: path
          required: true
          schema:
            type: string
            example: "Tischtennis_Bundesliga"
          description: "Name der Liga (URL-Slug)"

        - name: groupId
          in: path
          required: true
          schema:
            type: string
            example: "493079"
          description: "ID der Gruppe/Liga"

        - name: teamId
          in: path
          required: true
          schema:
            type: string
            example: "2953148"
          description: "ID der Mannschaft"

        - name: teamName
          in: path
          required: true
          schema:
            type: string
            example: "Borussia_Duesseldorf"
          description: "Name der Mannschaft (URL-Slug)"

        - name: filter
          in: path
          required: true
          schema:
            type: string
            enum: [gesamt, vr, rr]
            default: vr
          description: "Zeitraum-Filter (gesamt, vr = Vorrunde, rr = R√ºckrunde)"

        - name: _data
          in: query
          required: true
          schema:
            type: string
            default: "routes/click-tt+/$association+/$season+/$type+/($groupname).gruppe.$urlid_.mannschaft.$teamid.$teamname+/spielplan.$filter"
          description: "Interne Remix Route-ID (muss exakt dieser String sein, URL-encoded beim Aufruf)."

      responses:
        '200':
          description: Spielplan-Daten der Mannschaft
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      head_infos:
                        $ref: '#/components/schemas/FrontendHeadInfos'
                      schedule:
                        type: array
                        description: Liste der Begegnungen der Mannschaft
                        items:
                          type: object
                          properties:
                            date:
                              type: string
                              format: date-time
                              description: Spieltermin
                            state:
                              type: string
                              enum: [scheduled, done, cancelled]
                              description: Status der Begegnung
                            team_home:
                              type: string
                              description: Name Heimmannschaft
                            team_away:
                              type: string
                              description: Name Gastmannschaft
                            team_home_id:
                              type: string
                            team_away_id:
                              type: string
                            matches_won:
                              type: string
                              description: Gewonnene Matches (Heim)
                            matches_lost:
                              type: string
                              description: Verlorene Matches (Heim)
                            meeting_id:
                              type: string
                            location:
                              type: object
                              properties:
                                label:
                                  type: string
                                city:
                                  type: string
                                  nullable: true
                      meetings_excerpt:
                        $ref: '#/components/schemas/FrontendMeetingsExcerpt'
                  season:
                    type: string
                    example: "25--26"
                  association:
                    $ref: '#/components/schemas/Association'
                  error:
                    type: string
                    nullable: true

  /click-tt/{association}/{season}/ligen/{league_slug}/gruppe/{groupId}/mannschaft/{teamId}/{teamName}/infos:
    get:
      tags:
        - Mannschaften
      operationId: getFrontendTeamInfo
      summary: Mannschafts-Infos abrufen
      description: |
        L√§dt allgemeine Infos zur Mannschaft.
        Enth√§lt meist:
        * Mannschaftsf√ºhrung (Kontakt)
        * Spiellokal (Adresse, Anfahrt)
        * Mannschaftsfoto (falls vorhanden)
      security: []
      parameters:
        - $ref: '#/components/parameters/association'
        
        - name: season
          in: path
          required: true
          schema:
            type: string
            example: "25--26"
          description: "Saison (z.B. 25--26)"

        - name: league_slug
          in: path
          required: true
          schema:
            type: string
            example: "Tischtennis_Bundesliga"
          description: "Name der Liga (URL-Slug)"

        - name: groupId
          in: path
          required: true
          schema:
            type: string
            example: "493079"
          description: "ID der Gruppe/Liga"

        - name: teamId
          in: path
          required: true
          schema:
            type: string
            example: "2953148"
          description: "ID der Mannschaft"

        - name: teamName
          in: path
          required: true
          schema:
            type: string
            example: "Borussia_Duesseldorf"
          description: "Name der Mannschaft (URL-Slug)"

        - name: _data
          in: query
          required: true
          schema:
            type: string
            default: "routes/click-tt+/$association+/$season+/$type+/($groupname).gruppe.$urlid_.mannschaft.$teamid.$teamname+/infos"
          description: "Interne Remix Route-ID (muss exakt dieser String sein, URL-encoded beim Aufruf)."

      responses:
        '200':
          description: Mannschafts-Infos mit Kontakten und Spiellokal
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      head_infos:
                        $ref: '#/components/schemas/FrontendHeadInfos'
                      team_contact:
                        type: object
                        description: Mannschaftsf√ºhrung/Kontaktperson
                        properties:
                          contact_name:
                            type: string
                            example: "Max Mustermann"
                          street:
                            type: string
                            nullable: true
                          zipcode:
                            type: string
                            nullable: true
                          city:
                            type: string
                            nullable: true
                          phone_home:
                            type: string
                            nullable: true
                          phone_work:
                            type: string
                            nullable: true
                          phone_mobile:
                            type: string
                            nullable: true
                          email_home:
                            type: string
                            nullable: true
                          email_work:
                            type: string
                            nullable: true
                      venue:
                        type: object
                        description: Spiellokal/Halle
                        properties:
                          label:
                            type: string
                            example: "ARAG CenterCourt"
                          street:
                            type: string
                            nullable: true
                          zipcode:
                            type: string
                            nullable: true
                          city:
                            type: string
                            nullable: true
                          website:
                            type: string
                            nullable: true
                      team_photo_url:
                        type: string
                        nullable: true
                        description: URL zum Mannschaftsfoto (falls vorhanden)
                      meetings_excerpt:
                        $ref: '#/components/schemas/FrontendMeetingsExcerpt'
                  season:
                    type: string
                    example: "25--26"
                  association:
                    $ref: '#/components/schemas/Association'
                  error:
                    type: string
                    nullable: true

  /click-tt/{association}/{season}/verein/{clubId}/{clubSlug}/mannschaften:
    get:
      tags:
        - Vereine
      operationId: getFrontendClubTeams
      summary: Vereins-Mannschaften abrufen
      description: |
        L√§dt die Liste der Mannschaften eines Vereins via Remix-Loader.
        
        *Alternative:* Nutze den API-Endpunkt `/api/ttr/teams` f√ºr einfacheren Zugriff auf die gleichen Daten.
      security: []
      parameters:
        - $ref: '#/components/parameters/association'
        
        - name: season
          in: path
          required: true
          schema:
            type: string
            example: "25--26"
          description: "Saison (z.B. 25--26)"

        - name: clubId
          in: path
          required: true
          schema:
            type: string
            example: "13118"
          description: "Die Vereinsnummer"

        - name: clubSlug
          in: path
          required: true
          schema:
            type: string
            example: "Borussia_Duesseldorf"
            default: "x"
          description: "Name des Vereins (URL-Slug). Technisch oft irrelevant ('x' funktioniert)."

        - name: _data
          in: query
          required: true
          schema:
            type: string
            default: "routes/click-tt+/$association+/$season+/verein.$clubid.$clubname+/mannschaften"
          description: "Interne Remix Route-ID (muss exakt dieser String sein, URL-encoded beim Aufruf)."

      responses:
        '200':
          description: Liste der Mannschaften des Vereins
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      head_infos:
                        $ref: '#/components/schemas/FrontendHeadInfos'
                      club_name:
                        type: string
                        example: "Borussia D√ºsseldorf"
                      teams:
                        type: array
                        description: Liste der Mannschaften des Vereins
                        items:
                          type: object
                          properties:
                            team_id:
                              type: string
                              example: "2953148"
                            team_name:
                              type: string
                              example: "Erwachsene"
                            group_id:
                              type: string
                              example: "493079"
                            league_name:
                              type: string
                              example: "Tischtennis Bundesliga"
                            season:
                              type: string
                              example: "25/26"
                            table_rank:
                              type: string
                              description: Aktueller Tabellenplatz
                              example: "1"
                            points_won:
                              type: string
                              example: "14"
                            points_lost:
                              type: string
                              example: "4"
                            team_organisation_short:
                              type: string
                              example: "DTTB"
                  season:
                    type: string
                    example: "25--26"
                  association:
                    $ref: '#/components/schemas/Association'
                  error:
                    type: string
                    nullable: true

  /click-tt/{association}/{season}/verein/{clubId}/{clubSlug}/spielplan:
    get:
      tags:
        - Vereine
      operationId: getFrontendClubSchedule
      summary: Vereins-Spielplan abrufen
      description: |
        L√§dt den kompletten Spielplan eines Vereins (alle Mannschaften).
        Entspricht der "Meetings List" (alle Begegnungen sortiert nach Datum).
      security: []
      parameters:
        - $ref: '#/components/parameters/association'
        
        - name: season
          in: path
          required: true
          schema:
            type: string
            example: "25--26"
          description: "Saison (z.B. 25--26)"

        - name: clubId
          in: path
          required: true
          schema:
            type: string
            example: "13118"
          description: "Die Vereinsnummer"

        - name: clubSlug
          in: path
          required: true
          schema:
            type: string
            example: "Borussia_Duesseldorf"
            default: "x"
          description: "Name des Vereins (URL-Slug). Technisch oft irrelevant ('x' funktioniert)."

        - name: _data
          in: query
          required: true
          schema:
            type: string
            default: "routes/click-tt+/$association+/$season+/verein.$clubid.$clubname+/spielplan"
          description: "Interne Remix Route-ID (muss exakt dieser String sein, URL-encoded beim Aufruf)."

      responses:
        '200':
          description: Liste aller Spiele des Vereins
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      head_infos:
                        $ref: '#/components/schemas/FrontendHeadInfos'
                      club_name:
                        type: string
                        example: "Borussia D√ºsseldorf"
                      meetings:
                        type: array
                        description: Liste aller Begegnungen des Vereins (alle Mannschaften)
                        items:
                          type: object
                          properties:
                            date:
                              type: string
                              format: date-time
                              description: Spieltermin
                            state:
                              type: string
                              enum: [scheduled, done, cancelled]
                            team_home:
                              type: string
                            team_away:
                              type: string
                            team_home_id:
                              type: string
                            team_away_id:
                              type: string
                            matches_won:
                              type: string
                              nullable: true
                            matches_lost:
                              type: string
                              nullable: true
                            meeting_id:
                              type: string
                            league_name:
                              type: string
                              description: Name der Liga
                            league_short_name:
                              type: string
                            location:
                              type: object
                              properties:
                                label:
                                  type: string
                                  nullable: true
                                city:
                                  type: string
                                  nullable: true
                  season:
                    type: string
                    example: "25--26"
                  association:
                    $ref: '#/components/schemas/Association'
                  error:
                    type: string
                    nullable: true

  /click-tt/{association}/{season}/verein/{clubId}/{clubSlug}/bilanzen/{filter}:
    get:
      tags:
        - Vereine
      operationId: getFrontendClubBalances
      summary: Vereins-Bilanzen abrufen
      description: |
        L√§dt die Bilanzen **aller** Spieler eines Vereins, gruppiert nach Mannschaften.
        Ideal f√ºr eine √úbersicht: "Wer spielt am erfolgreichsten in dieser Saison?".
      security: []
      parameters:
        - $ref: '#/components/parameters/association'
        
        - name: season
          in: path
          required: true
          schema:
            type: string
            example: "25--26"
          description: "Saison (z.B. 25--26)"

        - name: clubId
          in: path
          required: true
          schema:
            type: string
            example: "13118"
          description: "Die Vereinsnummer"

        - name: clubSlug
          in: path
          required: true
          schema:
            type: string
            example: "Borussia_Duesseldorf"
            default: "x"
          description: "Name des Vereins (URL-Slug). Technisch oft irrelevant ('x' funktioniert)."

        - name: filter
          in: path
          required: true
          schema:
            type: string
            enum: [gesamt, vr, rr]
            default: gesamt
          description: "Zeitraum-Filter (gesamt, vr = Vorrunde, rr = R√ºckrunde)"

        - name: _data
          in: query
          required: true
          schema:
            type: string
            default: "routes/click-tt+/$association+/$season+/verein.$clubid.$clubname+/bilanzen.$filter"
          description: "Interne Remix Route-ID (muss exakt dieser String sein, URL-encoded beim Aufruf)."

      responses:
        '200':
          description: Vereins-Bilanzen aller Mitglieder gruppiert nach Mannschaften
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      head_infos:
                        $ref: '#/components/schemas/FrontendHeadInfos'
                      club_name:
                        type: string
                        example: "Borussia D√ºsseldorf"
                      team_balances:
                        type: array
                        description: Bilanzen gruppiert nach Mannschaften
                        items:
                          type: object
                          properties:
                            team_id:
                              type: string
                              example: "2953148"
                            team_name:
                              type: string
                              example: "Erwachsene"
                            league_name:
                              type: string
                              example: "Tischtennis Bundesliga"
                            player_balances:
                              type: array
                              description: Spielerbilanzen dieser Mannschaft
                              items:
                                type: object
                                properties:
                                  player_id:
                                    type: string
                                    example: "NU7535"
                                  player_firstname:
                                    type: string
                                    example: "Dang"
                                  player_lastname:
                                    type: string
                                    example: "Qiu"
                                  meetings_count:
                                    type: integer
                                    description: Anzahl der Eins√§tze
                                  points_won:
                                    type: integer
                                    description: Gewonnene Punkte
                                  points_lost:
                                    type: integer
                                    description: Verlorene Punkte
                  season:
                    type: string
                    example: "25--26"
                  association:
                    $ref: '#/components/schemas/Association'
                  season_filter:
                    type: string
                    enum: [firstRound, secondRound, finalRound]
                  error:
                    type: string
                    nullable: true

  /click-tt/{association}/{season}/verein/{clubId}/{clubSlug}/info:
    get:
      tags:
        - Vereine
      operationId: getFrontendClubInfo
      summary: Vereins-Infos abrufen
      description: |
        L√§dt die Stammdaten eines Vereins.
        Enth√§lt:
        * Kontaktadressen (Vereinsf√ºhrung)
        * Spiellokale (Adressen & Anfahrt)
        * Allgemeine Daten (Gr√ºndungsjahr, Vereinsfarben, Homepage)
      security: []
      parameters:
        - $ref: '#/components/parameters/association'
        
        - name: season
          in: path
          required: true
          schema:
            type: string
            example: "25--26"
          description: "Saison (z.B. 25--26)"

        - name: clubId
          in: path
          required: true
          schema:
            type: string
            example: "13118"
          description: "Die Vereinsnummer"

        - name: clubSlug
          in: path
          required: true
          schema:
            type: string
            example: "Borussia_Duesseldorf"
            default: "x"
          description: "Name des Vereins (URL-Slug). Technisch oft irrelevant ('x' funktioniert)."

        - name: _data
          in: query
          required: true
          schema:
            type: string
            default: "routes/click-tt+/$association+/$season+/verein.$clubid.$clubname+/info"
          description: "Interne Remix Route-ID (muss exakt dieser String sein, URL-encoded beim Aufruf)."

      responses:
        '200':
          description: Vereins-Stammdaten
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      head_infos:
                        $ref: '#/components/schemas/FrontendHeadInfos'
                      club_name:
                        type: string
                        example: "Borussia D√ºsseldorf"
                      club_number:
                        type: string
                        example: "13118"
                      founded_year:
                        type: string
                        nullable: true
                        description: Gr√ºndungsjahr
                      club_colors:
                        type: string
                        nullable: true
                        description: Vereinsfarben
                      website:
                        type: string
                        nullable: true
                        example: "www.beispiel-verein.de"
                      contacts:
                        type: array
                        description: Kontaktadressen (Vereinsf√ºhrung)
                        items:
                          type: object
                          properties:
                            label:
                              type: string
                              example: "Kontaktadresse"
                            contact_name:
                              type: string
                              example: "Gesch√§ftsstelle"
                            street:
                              type: string
                              nullable: true
                            zipcode:
                              type: string
                              nullable: true
                            city:
                              type: string
                              nullable: true
                            phone_home:
                              type: string
                              nullable: true
                            phone_work:
                              type: string
                              nullable: true
                            phone_mobile:
                              type: string
                              nullable: true
                            email_home:
                              type: string
                              nullable: true
                            email_work:
                              type: string
                              nullable: true
                            website:
                              type: string
                              nullable: true
                      venues:
                        type: array
                        description: Spiellokale des Vereins
                        items:
                          type: object
                          properties:
                            label:
                              type: string
                              example: "Spiellokal 1"
                            contact_name:
                              type: string
                              example: "ARAG CenterCourt"
                            street:
                              type: string
                              nullable: true
                            zipcode:
                              type: string
                              nullable: true
                            city:
                              type: string
                              nullable: true
                            website:
                              type: string
                              nullable: true
                  season:
                    type: string
                    example: "25--26"
                  association:
                    $ref: '#/components/schemas/Association'
                  error:
                    type: string
                    nullable: true

  /click-tt/{association}/{season}/regionsspielplan/{championship}:
    get:
      tags:
        - Ligen & Gruppen
      operationId: getFrontendRegionalSchedule
      summary: Regionsspielplan abrufen
      description: |
        L√§dt den Spielplan einer gesamten Region (z.B. Kreis oder Bezirk).
        Erm√∂glicht Filterung nach Datum, Altersklasse und Heim-/Ausw√§rtsspielen.
      security: []
      parameters:
        - $ref: '#/components/parameters/association'
        
        - name: season
          in: path
          required: true
          schema:
            type: string
            example: "25--26"
          description: "Saison (z.B. 25--26)"

        - name: championship
          in: path
          required: true
          schema:
            type: string
            example: "Rhein-Wupper_25--26"
          description: "Name der Region/Ebene (URL-Slug)"

        - name: date_start
          in: query
          schema:
            type: string
            format: date
            example: "2025-11-03"
          description: "Startdatum f√ºr den Filter (YYYY-MM-DD)"

        - name: date_end
          in: query
          schema:
            type: string
            format: date
            example: "2025-12-03"
          description: "Enddatum f√ºr den Filter (YYYY-MM-DD)"

        - name: gender_age_group
          in: query
          schema:
            type: string
            enum: [all, general, junior, seniors]
            default: all
          description: |
            Filter nach Altersklasse:
            * `all`: Alle
            * `general`: Damen & Herren
            * `junior`: Jugend & Sch√ºler
            * `seniors`: Senioren

        - name: include_guest_meetings
          in: query
          schema:
            type: string
            enum: ["on"]
          description: "Wenn gesetzt (`on`), werden auch Ausw√§rtsspiele angezeigt. Standardm√§√üig nur Heimspiele."

        - name: _data
          in: query
          required: true
          schema:
            type: string
            default: "routes/click-tt+/$association+/$season+/regionsspielplan.$championship"
          description: "Interne Remix Route-ID (muss exakt dieser String sein, URL-encoded beim Aufruf)."

      responses:
        '200':
          description: Liste der Spiele in der Region
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      head_infos:
                        $ref: '#/components/schemas/FrontendHeadInfos'
                      championship_name:
                        type: string
                        example: "Rhein-Wupper 25/26"
                      filter:
                        type: object
                        description: Aktive Filtereinstellungen
                        properties:
                          date_start:
                            type: string
                            format: date
                          date_end:
                            type: string
                            format: date
                          gender_age_group:
                            type: string
                          include_guest_meetings:
                            type: boolean
                      meetings:
                        type: array
                        description: Liste der Begegnungen in der Region
                        items:
                          type: object
                          properties:
                            date:
                              type: string
                              format: date-time
                            state:
                              type: string
                              enum: [scheduled, done, cancelled]
                            team_home:
                              type: string
                            team_away:
                              type: string
                            team_home_id:
                              type: string
                            team_away_id:
                              type: string
                            matches_won:
                              type: string
                              nullable: true
                            matches_lost:
                              type: string
                              nullable: true
                            meeting_id:
                              type: string
                            league_name:
                              type: string
                            league_short_name:
                              type: string
                            location:
                              type: object
                              properties:
                                label:
                                  type: string
                                  nullable: true
                                city:
                                  type: string
                                  nullable: true
                  season:
                    type: string
                    example: "25--26"
                  association:
                    $ref: '#/components/schemas/Association'
                  error:
                    type: string
                    nullable: true

  # ================================================================
  # NAVIGATION
  # ================================================================
  /click-tt/{association}/{season}/{type}/{championship}:
    get:
      tags:
        - Ligen & Gruppen
      operationId: getFrontendLeagueHierarchy
      summary: Liga-Hierarchie abrufen
      description: |
        L√§dt die √úbersicht einer Liga-Ebene (z.B. Bezirk, Kreis).
        Liefert eine Liste der enthaltenen Ligen und Gruppen inkl. deren `groupId` (group_urlid).
        
        N√ºtzlich zum Ermitteln von `groupId`s f√ºr andere Endpunkte.
        
        **‚ö†Ô∏è Experimentell:** Die genaue URL-Struktur variiert je nach Verband.
      security: []
      parameters:
        - $ref: '#/components/parameters/association'
        
        - name: season
          in: path
          required: true
          schema:
            type: string
            example: "P_25--26"
          description: "Saison (z.B. 25--26 f√ºr Liga, P_25--26 f√ºr Pokal)"

        - name: type
          in: path
          required: true
          schema:
            type: string
            enum: [ligen, pokalspiele]
            default: pokalspiele
          description: "Art des Wettbewerbs"

        - name: championship
          in: path
          required: true
          schema:
            type: string
            example: "Rhein-Wupper_P_25--26"
          description: "Name der Ebene/Meisterschaft (URL-Slug, muss zur Season passen)"

        - name: _data
          in: query
          required: true
          schema:
            type: string
            default: "routes/click-tt+/$association+/$season+/$type+/$championship"
          description: "Interne Remix Route-ID (muss exakt dieser String sein, URL-encoded beim Aufruf)."

      responses:
        '200':
          description: Liste der Ligen/Gruppen in dieser Ebene
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    description: Gruppen nach Altersklasse gruppiert
                    items:
                      type: object
                      properties:
                        contest:
                          type: string
                          description: Altersklasse/Wettbewerbsart
                          example: "Erwachsene"
                        groups:
                          type: array
                          items:
                            type: object
                            properties:
                              name:
                                type: string
                                example: "Pokal Bezirksoberliga"
                              league_id:
                                type: string
                                example: "233041"
                              group_urlid:
                                type: string
                                description: Die groupId f√ºr weitere API-Aufrufe
                                example: "497958"
                  higherLeagues:
                    type: array
                    description: √úbergeordnete Meisterschaften (Verband, DTTB)
                    items:
                      type: object
                      properties:
                        type:
                          type: string
                          example: "PARENT"
                        regionName:
                          type: string
                          example: "Nordrhein-Westfalen"
                        championshipName:
                          type: string
                          example: "WTTV Pokal Saison 2025/26"
                        federationNickname:
                          type: string
                          example: "WTTV"
                  lowerLeagues:
                    type: array
                    description: Untergeordnete Meisterschaften (Kreise)
                  championship:
                    type: string
                    example: "Rhein-Wupper P 25/26"
                  association:
                    $ref: '#/components/schemas/Association'
                  season:
                    type: string
                    example: "P_25--26"
                  seasonType:
                    type: string
                    enum: ["P", ""]
                    description: "P = Pokal, leer = Liga"
                  error:
                    type: string
                    nullable: true

  # ================================================================
  # RANKING
  # ================================================================
  /rankings/andro-rangliste:
    get:
      tags:
        - Spieler*innen & TTR
      operationId: getAndroRanking
      summary: Andro-Rangliste abrufen
      description: |
        L√§dt die globale TTR-Rangliste mit umfangreichen Filterm√∂glichkeiten.
        
        **TTR vs Q-TTR (`fedRank` in Response):**
        * **Mit Authentifizierung:** Aktueller TTR (Default), wechselbar zu Q-TTR via `current-ranking=no`
        * **Ohne Authentifizierung:** Nur Q-TTR verf√ºgbar, `current-ranking` Parameter wird ignoriert
        
        **Zugriffslevel (`userContentAccessLevel` in Response):**
        * **`public`:** Nicht eingeloggt - limitierte Ergebnisse (`maxRows: 300`)
        * **`premium`:** Eingeloggt - volle Ergebnisse (`maxRows: 500+`)
        
        **Technisch:** Diese Seite wird von der Remix **Splat Route (`routes/$`)** bedient.
        Der Parameter `_data` muss zwingend auf `routes/$` gesetzt werden.
      security:
        - {} # Optional: Ohne Auth nur Q-TTR
        - cookieAuth: [] # Mit Auth: TTR w√§hlbar
      parameters:
        # --- Filter Parameter ---
        - name: continent
          in: query
          schema:
            type: string
            enum: [Alle, Europa, Asien, Afrika, Nordamerika, S√ºdamerika, Ozeanien]
            default: Europa
          description: "Filter nach Kontinent (Default: Europa)"

        - name: country
          in: query
          schema:
            type: string
            default: Deutschland
          description: "Land, abh√§ngig vom Kontinent (Default: Deutschland)"

        - name: germans-ranking
          in: query
          schema:
            type: string
            enum: ["on"]
          description: |
            **Checkbox:** Deutsche + Gleichgestellte.
            * Parameter vorhanden (`on`): Nur Deutsche und Gleichgestellte
            * Parameter nicht gesetzt: Alle Nationalit√§ten (Default)

        - name: all-players
          in: query
          schema:
            type: string
            enum: ["on"]
          description: |
            **Checkbox:** Alle Spielberechtigten.
            * Parameter vorhanden (`on`): Alle Spielberechtigten anzeigen
            * Parameter nicht gesetzt: Standardfilter (Default)

        - name: gender
          in: query
          schema:
            type: string
            enum: [m, w, all]
            default: all
          description: "Geschlecht (m = m√§nnlich, w = weiblich, all = alle)"

        - name: current-ranking
          in: query
          schema:
            type: string
            enum: ["yes", "no"]
          description: |
            TTR-Wert Auswahl: `yes` = Aktueller TTR, `no` = Q-TTR.
            
            **Verhalten abh√§ngig von Authentifizierung:**
            * **Mit Auth:** Default `yes` (aktueller TTR), wechselbar
            * **Ohne Auth:** Immer Q-TTR, Parameter wird ignoriert

        - name: ttr-range
          in: query
          schema:
            type: string
            example: "100;2840"
          description: "TTR-Bereich von;bis (mit Semikolon getrennt)"

        - name: birth-range
          in: query
          schema:
            type: string
            example: "1925;2016"
          description: "Geburtsjahr-Bereich von;bis (mit Semikolon getrennt)"

        # --- Regionale Filter (nur Deutschland, optional) ---
        - name: as
          in: query
          schema:
            type: string
            example: "DE.WE.R3.19"
          description: |
            **Optional, nur f√ºr Deutschland.** Filter auf Landesverband.
            
            **Voraussetzung:** `all-players=on` muss gesetzt sein.
            
            Werte: `all` (alle Verb√§nde) oder Verband-Code aus `/api/andro-ranking/regions`.
            Beispiele: `DE.WE.R3.19` (WTTV), `DE.SU.R1.02` (Bayern), etc.

        - name: di
          in: query
          schema:
            type: string
            example: "DE.WE.R3.19.13"
          description: |
            **Optional, nur f√ºr Deutschland.** Filter auf Bezirk.
            
            **Voraussetzung:** `as` muss auf einen spezifischen Verband gesetzt sein (nicht `all`).
            
            Werte aus `/api/andro-ranking/regions?as=<verband>&di=all`.
            Beispiel: `DE.WE.R3.19.13` (Rhein-Wupper im WTTV)

        - name: area
          in: query
          schema:
            type: string
            example: "DE.NO.R6.08.01.01"
          description: |
            **Optional, nur f√ºr Deutschland.** Filter auf Kreis (tiefste Ebene).
            
            **Voraussetzung:** `di` muss auf einen spezifischen Bezirk gesetzt sein, der Kreise hat.
            
            Nicht alle Bezirke haben Kreise! Pr√ºfen via `/api/andro-ranking/regions?as=<verband>&di=<bezirk>`.
            Beispiel: `DE.NO.R6.08.01.01` (Kreis Ludwigslust-Parchim in Mecklenburg-Vorpommern)

        - name: fednickname
          in: query
          schema:
            type: string
          description: "Verbandsk√ºrzel (oft leer, wenn 'as' gesetzt ist)"

        # --- Pagination ---
        - name: results-per-page
          in: query
          schema:
            type: integer
            enum: [10, 20, 50, 100]
            default: 20
          description: "Ergebnisse pro Seite (Default: 20 wenn nicht gesetzt)"

        - name: page
          in: query
          schema:
            type: integer
            default: 1
          description: "Seitennummer"

        # --- Technischer Remix Parameter ---
        - name: _data
          in: query
          required: true
          schema:
            type: string
            default: "routes/$"
            example: "routes/$"
          description: "Muss zwingend `routes/$` sein (Catch-All Splat Route)."

      responses:
        '200':
          description: Ranglisten-Daten
          content:
            application/json:
              schema:
                type: object
                properties:
                  blockLoaderData:
                    type: object
                    description: |
                      Die Daten befinden sich in einem dynamischen Key (Block-ID).
                      Struktur: `blockLoaderData.<block-id>`.
                    additionalProperties:
                      $ref: '#/components/schemas/AndroRankingData'
                  userContentAccessLevel:
                    type: string
                    description: |
                      Zugriffslevel der aktuellen Person.
                      
                      * **`public`:** Nicht eingeloggt - nur Q-TTR, begrenzte Ergebnisse
                      * **`premium`:** Eingeloggt - TTR w√§hlbar, volle Filterm√∂glichkeiten
                    enum: [public, premium]
                    example: "premium"
                  pageUrl:
                    type: string
                    description: Aktuelle URL mit allen Query-Parametern
              example:
                blockLoaderData:
                  "f87d4e7c-83f1-4e68-b0ec-f12fc0f1b9d5":
                    area: "all"
                    association: "DE.WE.R3.19"
                    district: "DE.WE.R3.19.13"
                    continent: "Europa"
                    country: "Deutschland"
                    gender: "all"
                    germansRanking: ""
                    allPlayers: ""
                    currentRanking: "no"
                    ttrRange: [100, 2840]
                    birthRange: [1925, 2016]
                    resultsPerPage: 20
                    currentPage: 0
                    numberOfPages: 25
                    resultLength: 500
                    maxRows: 500
                    entries:
                      - rank: 19
                        position: 1
                        personId: "NU7535"
                        firstname: "Dang"
                        lastname: "Qiu"
                        gender: "male"
                        fedRank: 2611
                        germanRank: 1
                        germanSexRank: 1
                        clubNr: "13118"
                        clubName: "Borussia D√ºsseldorf"
                        clubSexRank: 1
                        fedNickname: "WTTV"
                        country: "Deutschland"
                        continent: "Europa"
                        matchCount: 1559
                        fewGames: 1559
                        lastYearNoGames: "no"
                        external_id: "482245c8-4e16-4714-8904-889536a33a20"
                      - rank: 27
                        position: 2
                        personId: "NU218453"
                        firstname: "Benedikt"
                        lastname: "Duda"
                        gender: "male"
                        fedRank: 2597
                        germanRank: 2
                        germanSexRank: 2
                        clubNr: "21608"
                        clubName: "TTC Schwalbe Bergneustadt"
                        clubSexRank: 1
                        fedNickname: "WTTV"
                        country: "Deutschland"
                        continent: "Europa"
                        matchCount: 1694
                        fewGames: 1694
                        lastYearNoGames: "no"
                        external_id: "55dccd9e-a344-4e8f-ab46-bffffafa30ec"
                    regions:
                      associations:
                        - name: "Nordrhein-Westfalen"
                          pattern: "DE.WE.R3.19"
                      districts:
                        - name: "Rhein-Wupper"
                          pattern: "DE.WE.R3.19.13"
                      areas: []
                userContentAccessLevel: "premium"
                pageUrl: "https://www.mytischtennis.de/rankings/andro-rangliste?continent=Europa&country=Deutschland"
# -------------------------------------------------------------------
# WIEDERVERWENDBARE KOMPONENTEN
# -------------------------------------------------------------------
components:
  securitySchemes:
    cookieAuth:
      type: apiKey
      in: cookie
      name: sb-10-auth-token

  parameters:
    playerId:
      name: player_id
      in: path
      required: true
      schema:
        type: string
      description: Eindeutige ID des Spielers
      example: "PEB7814 oder NU7535"

    dateRange:
      name: date_range
      in: path
      required: true
      schema:
        type: string
        enum:
          - last_3_months
          - last_6_months
          - last_12_months
          - current_season
          - everything
        example: "current_season"
      description: Zeitraum f√ºr die Statistiken

    eventId:
      name: eventId
      in: path
      required: true
      schema:
        type: string
      description: ID des Kalendereintrags

    tournamentId:
      name: tournament_id
      in: path
      required: true
      schema:
        type: string
      description: ID des Turniers

    competitionId:
      name: competition_id
      in: path
      required: true
      schema:
        type: string
      description: ID der Konkurrenz/Klasse

    searchQuery:
      name: q
      in: query
      required: true
      schema:
        type: string
        minLength: 3
      description: Suchbegriff

    association:
      name: association
      in: path
      required: true
      schema:
        $ref: '#/components/schemas/Association'
      description: |
        K√ºrzel des Landesverbandes.
        
        Die wichtigsten: DTTB (Bundesebene), WTTV (NRW), ByTTV (Bayern), HeTTV (Hessen).

  schemas:
    # Allgemeine wiederverwendbare Schemas
    ErrorResponse:
      type: object
      description: Standard-Fehlerantwort (einfach)
      properties:
        error:
          type: string
          description: Maschinenlesbarer Fehlercode
          example: "not_found"
        message:
          type: string
          description: Menschenlesbare Fehlermeldung
          example: "Die angeforderte Ressource wurde nicht gefunden"
      required:
        - error

    ApiError:
      type: object
      description: Detaillierte API-Fehlerantwort (von den meisten Endpunkten verwendet)
      properties:
        code:
          type: string
          description: Fehlercode (z.B. PT403, PT500, 22P02)
          example: "PT403"
        message:
          type: string
          description: Fehlermeldung
          example: "Not authorized"
        details:
          type: string
          nullable: true
          description: Zus√§tzliche Details
          example: "Not logged in"
        hint:
          type: string
          nullable: true
          description: L√∂sungshinweis
          example: "Login or register"

    PaginationMeta:
      type: object
      description: Paginierungs-Metadaten
      properties:
        total_count:
          type: integer
          description: Gesamtanzahl der Ergebnisse
          example: 42
        pages_count:
          type: integer
          description: Anzahl der Seiten
          example: 11
        page:
          type: integer
          description: Aktuelle Seite
          example: 1
        pagesize:
          type: integer
          description: Ergebnisse pro Seite
          example: 4

    Association:
      type: string
      description: K√ºrzel des Landesverbandes
      enum:
        - DTTB      # Deutscher Tischtennis-Bund
        - BaTTV     # Badischer Tischtennis-Verband
        - TTBW      # Tischtennis Baden-W√ºrttemberg
        - ByTTV     # Bayerischer Tischtennis-Verband
        - TTVB      # Tischtennis-Verband Berlin
        - FTTB      # Fachverband Tischtennis Brandenburg
        - HaTTV     # Hamburger Tischtennis-Verband
        - HeTTV     # Hessischer Tischtennis-Verband
        - TTVMV     # Tischtennis-Verband Mecklenburg-Vorpommern
        - TTVN      # Tischtennis-Verband Niedersachsen
        - WTTV      # Westdeutscher Tischtennis-Verband
        - PTTV      # Pf√§lzischer Tischtennis-Verband
        - RTTVR     # Rheinland-Rheinhessen TT-Verband
        - STTB      # Saarl√§ndischer Tischtennis-Bund
        - TTVSA     # Tischtennis-Verband Sachsen-Anhalt
        - TTTV      # Th√ºringer Tischtennis-Verband
      example: "WTTV"

    PlayerSearchResult:
      type: object
      description: Suchergebnis f√ºr Spieler*innen
      properties:
        lastname:
          type: string
          example: "Qiu"
        firstname:
          type: string
          example: "Dang"
        person_id:
          type: integer
          example: 344349
        internal_id:
          type: string
          description: "NU-Nummer (Nationale User ID)"
          example: "NU7535"
        licence_club:
          type: string
          example: "Borussia D√ºsseldorf (13118)"
        dttb_player_id:
          type: string
          nullable: true
        club_name:
          type: string
          example: "Borussia D√ºsseldorf"

    ClubSearchResult:
      type: object
      description: Vereins-Suchergebnis
      properties:
        external_id:
          type: string
          format: uuid
        clubname:
          type: string
          example: "Borussia D√ºsseldorf"
        clubnr:
          type: string
          example: "13118"
        organization_id:
          type: integer
          example: 28
        organization_name:
          type: string
          example: "Westdeutscher Tischtennis-Verband e.V."
        organization_short:
          type: string
          example: "WTTV"

    AndroRankingRegion:
      type: object
      description: Andro-Ranking Region
      properties:
        id:
          type: string
          description: Regions-ID
        name:
          type: string
          description: Name der Region
        code:
          type: string
          description: Regionsk√ºrzel

    AndroRankingData:
      type: object
      description: Andro-Ranglisten Daten
      properties:
        area:
          type: string
          example: "all"
        association:
          type: string
          description: Verbands-Code
          example: "DE.WE.R3.19"
        district:
          type: string
          description: Bezirks-Code
          example: "DE.WE.R3.19.13"
        continent:
          type: string
          example: "Europa"
        country:
          type: string
          example: "Deutschland"
        gender:
          type: string
          enum: [all, male, female]
          example: "all"
        germansRanking:
          type: string
          description: Leer = off, "on" = nur Deutsche
          example: ""
        allPlayers:
          type: string
          description: Leer = off, "on" = alle Spielberechtigten
          example: ""
        currentRanking:
          type: string
          enum: ["yes", "no"]
          description: "yes = aktueller TTR, no = Q-TTR"
          example: "no"
        ttrRange:
          type: array
          items:
            type: integer
          minItems: 2
          maxItems: 2
          description: "[min, max] TTR-Bereich"
          example: [100, 2840]
        birthRange:
          type: array
          items:
            type: integer
          minItems: 2
          maxItems: 2
          description: "[min, max] Geburtsjahr-Bereich"
          example: [1925, 2016]
        resultsPerPage:
          type: integer
          example: 20
        currentPage:
          type: integer
          description: Aktuelle Seite (0-basiert)
          example: 0
        numberOfPages:
          type: integer
          example: 25
        resultLength:
          type: integer
          description: Anzahl Ergebnisse auf aktueller Seite
          example: 500
        maxRows:
          type: integer
          example: 500
        entries:
          type: array
          description: Aufstellungsliste
          items:
            $ref: '#/components/schemas/AndroRankingEntry'
        regions:
          type: object
          description: Verf√ºgbare Regionen f√ºr Filter
          properties:
            associations:
              type: array
              items:
                type: object
                properties:
                  name:
                    type: string
                    example: "Nordrhein-Westfalen"
                  pattern:
                    type: string
                    example: "DE.WE.R3.19"
            districts:
              type: array
              items:
                type: object
                properties:
                  name:
                    type: string
                    example: "Rhein-Wupper"
                  pattern:
                    type: string
                    example: "DE.WE.R3.19.13"
            areas:
              type: array
              items:
                type: object
        userRanking:
          type: array
          nullable: true
          description: Position des eingeloggten Users (falls vorhanden)
          items:
            $ref: '#/components/schemas/AndroRankingEntry'
        clubNr:
          type: string
          description: Vereinsnummer-Filter (falls gesetzt)

    AndroRankingEntry:
      type: object
      description: Einzelne Person in der Rangliste
      properties:
        rank:
          type: integer
          description: Globaler Rang in der Rangliste
          example: 19
        position:
          type: integer
          description: Position auf der aktuellen Seite (1-basiert)
          example: 1
        personId:
          type: string
          description: Spieler-ID (NU-Nummer)
          example: "NU7535"
        firstname:
          type: string
          example: "Dang"
        lastname:
          type: string
          example: "Qiu"
        gender:
          type: string
          enum: [male, female]
          example: "male"
        fedRank:
          type: integer
          description: |
            TTR-Wert des Spielers.
            
            **Abh√§ngig von Authentifizierung und `current-ranking` Parameter:**
            * **Ohne Auth:** Immer Q-TTR (Quartal-TTR)
            * **Mit Auth + `current-ranking=no`:** Q-TTR
            * **Mit Auth + `current-ranking=yes`:** Aktueller TTR (Echtzeit)
          example: 2611
        germanRank:
          type: integer
          description: Rang in Deutschland (alle Geschlechter)
          example: 1
        germanSexRank:
          type: integer
          description: Rang in Deutschland (gleiches Geschlecht)
          example: 1
        clubNr:
          type: string
          description: Vereinsnummer
          example: "13118"
        clubName:
          type: string
          example: "Borussia D√ºsseldorf"
        clubSexRank:
          type: integer
          description: Rang im Verein (gleiches Geschlecht)
          example: 1
        fedNickname:
          type: string
          description: Landesverband-K√ºrzel
          example: "WTTV"
        country:
          type: string
          example: "Deutschland"
        continent:
          type: string
          example: "Europa"
        matchCount:
          type: integer
          description: Anzahl gewerteter Spiele
          example: 1559
        fewGames:
          type: integer
          description: Anzahl Spiele (identisch mit matchCount)
          example: 1559
        lastYearNoGames:
          type: string
          enum: ["yes", "no"]
          description: Keine Spiele im letzten Jahr
          example: "no"
        external_id:
          type: string
          format: uuid
          nullable: true
          description: Externe UUID
          example: "482245c8-4e16-4714-8904-889536a33a20"

    # Frontend-Data wiederverwendbare Schemas
    FrontendHeadInfos:
      type: object
      description: Kopfinformationen zu Liga, Saison, Spielmodus
      properties:
        season:
          type: string
          nullable: true
          example: "25/26"
        play_mode:
          type: string
          nullable: true
          example: "TTBL Spielsystem inkl. Doppel"
        league_name:
          type: string
          nullable: true
          example: "Tischtennis Bundesliga"
        championship:
          type: string
          nullable: true
          example: "DTTB 25/26"
        gender_age_group:
          type: string
          nullable: true
          example: "Erwachsene"
        organization_short:
          type: string
          example: "DTTB"

    FrontendSeasonListItem:
      type: object
      description: Einzelne Saison in der Season-Liste
      properties:
        name:
          type: string
          example: "25/26"
        full_name:
          type: string
          example: "2025/26"

    FrontendMeetingsExcerpt:
      type: object
      description: Auszug aus dem Spielplan mit Begegnungen
      nullable: true
      properties:
        remarks:
          type: string
          nullable: true
        meetings:
          type: array
          items:
            type: object
            description: Begegnungen gruppiert nach Datum
        round_type:
          type: string
          example: "mixed"
        pdf_version_url:
          type: string
          format: uri
          example: "https://dttb.click-tt.de/cgi-bin/WebObjects/nuLigaDokumentTTDE.woa/wa/nuDokument?dokument=ScheduleReportFOP&group=493079"
        pdf_materials_url:
          type: string
          format: uri
          example: "https://dttb.click-tt.de/cgi-bin/WebObjects/nuLigaDokumentTTDE.woa/wa/nuDokument?dokument=TeamMaterialsFOP&group=493079"

    FrontendMetadata:
      type: object
      description: Standard-Metadaten die in allen Frontend-Data Responses vorkommen
      properties:
        season:
          type: string
          example: "25--26"
        association:
          $ref: '#/components/schemas/Association'
        groupname:
          type: string
          example: "Tischtennis_Bundesliga"
        urlid:
          type: string
          example: "493079"
        error:
          type: string
          nullable: true

  responses:
    BadRequest:
      description: Ung√ºltige Anfrage
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: "bad_request"
            message: "Ung√ºltiger Parameter"
    
    Unauthorized:
      description: Authentifizierung erforderlich
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: "unauthorized"
            message: "Bitte melden Sie sich an"
    
    NotFound:
      description: Ressource nicht gefunden
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: "not_found"
            message: "Ressource nicht gefunden"
    
    RateLimited:
      description: Rate Limit √ºberschritten
      headers:
        RateLimit:
          description: Rate Limit Status
          schema:
            type: string
            example: "90-in-1hr; r=0; t=1800"
        Retry-After:
          description: Sekunden bis zum n√§chsten erlaubten Request
          schema:
            type: integer
            example: 1800
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: "rate_limit_error"
            message: "Zu viele Anfragen. Bitte warten Sie."